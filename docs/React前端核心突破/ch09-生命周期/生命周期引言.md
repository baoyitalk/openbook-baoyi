# React ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ - ç¬¬ä¸€æ€§åŸç†æ·±åº¦æ‹†è§£

## ä¸€ã€ç¬¬ä¸€æ€§åŸç†ï¼šä¸ºä»€ä¹ˆéœ€è¦ç”Ÿå‘½å‘¨æœŸï¼Ÿ

### æœ¬è´¨æ€è€ƒ

**UI = f(state)** â€” React çš„æ ¸å¿ƒå…¬å¼ã€‚ç»„ä»¶å°†çŠ¶æ€æ˜ å°„ä¸º UIï¼Œä½†åœ¨æ˜ å°„è¿‡ç¨‹çš„ä¸åŒé˜¶æ®µï¼Œæˆ‘ä»¬éœ€è¦æ‰§è¡Œå‰¯ä½œç”¨æ“ä½œï¼ˆæ•°æ®è·å–ã€è®¢é˜…ã€DOMæ“ä½œç­‰ï¼‰ã€‚

**ä¸€ä¸ª UI ç»„ä»¶å¿…ç„¶ç»å†ä¸‰ä¸ªé˜¶æ®µï¼š**
1. **æŒ‚è½½ (Mount)** â€” ç»„ä»¶é¦–æ¬¡å‡ºç°åœ¨é¡µé¢
2. **æ›´æ–° (Update)** â€” çŠ¶æ€æˆ–å±æ€§å‘ç”Ÿå˜åŒ–  
3. **å¸è½½ (Unmount)** â€” ç»„ä»¶ä»é¡µé¢ç§»é™¤

ç”Ÿå‘½å‘¨æœŸæ–¹æ³•å°±æ˜¯ React æä¾›çš„"é’©å­"ï¼Œè®©æˆ‘ä»¬åœ¨è¿™äº›å…³é”®æ—¶åˆ»æ‰§è¡Œè‡ªå®šä¹‰é€»è¾‘ã€‚

### React æ¸²æŸ“çš„ä¸¤å¤§é˜¶æ®µ

| é˜¶æ®µ | ç‰¹ç‚¹ | æ³¨æ„äº‹é¡¹ |
|-----|------|---------|
| **Render é˜¶æ®µ** | çº¯å‡€ã€æ— å‰¯ä½œç”¨ï¼Œå¯è¢« React æš‚åœ/ä¸­æ­¢/é‡å¯ | âš ï¸ æ–¹æ³•å¯èƒ½è¢«å¤šæ¬¡è°ƒç”¨ï¼ |
| **Commit é˜¶æ®µ** | å¯æ“ä½œ DOMï¼Œè¿è¡Œå‰¯ä½œç”¨ï¼Œåªæ‰§è¡Œä¸€æ¬¡ | âœ… å®‰å…¨æ‰§è¡Œå‰¯ä½œç”¨ |

> ğŸ’¡ **ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ** Concurrent Mode å…è®¸ä¸­æ–­ä½ä¼˜å…ˆçº§æ›´æ–°ï¼Œä¼˜å…ˆå¤„ç†ç”¨æˆ·è¾“å…¥ï¼Œæå‡ä½“éªŒã€‚

---

## äºŒã€ç”Ÿå‘½å‘¨æœŸæ‰§è¡Œæµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ğŸ“¦ æŒ‚è½½é˜¶æ®µ (Mounting)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  constructor() â†’ getDerivedStateFromProps() â†’ render() â†’ componentDidMount()  â”‚
â”‚     [ç‰¹æ®Š]            [Renderé˜¶æ®µ]          [Render]     [Commité˜¶æ®µ]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ğŸ”„ æ›´æ–°é˜¶æ®µ (Updating)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  getDerivedStateFromProps() â†’ shouldComponentUpdate() â†’ render()             â”‚
â”‚       [Renderé˜¶æ®µ]              [Renderé˜¶æ®µ]          [Render]               â”‚
â”‚                                     â†“                                        â”‚
â”‚            getSnapshotBeforeUpdate() â†’ componentDidUpdate()                  â”‚
â”‚                 [Pre-commit]            [Commité˜¶æ®µ]                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ğŸ’¨ å¸è½½é˜¶æ®µ (Unmounting)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      componentWillUnmount()                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å„æ–¹æ³•è¯¦è§£

| æ–¹æ³• | é˜¶æ®µ | ä½œç”¨ |
|-----|------|-----|
| `constructor(props)` | æŒ‚è½½å‰ | åˆå§‹åŒ– stateï¼Œç»‘å®šäº‹ä»¶å¤„ç†å‡½æ•°çš„ this |
| `static getDerivedStateFromProps()` | Render | é™æ€æ–¹æ³•ï¼Œä» props æ´¾ç”Ÿ stateï¼Œè¿”å›å¯¹è±¡æˆ– null |
| `shouldComponentUpdate()` | Render | æ€§èƒ½ä¼˜åŒ–ï¼Œè¿”å› boolean å†³å®šæ˜¯å¦é‡æ–°æ¸²æŸ“ |
| `render()` | Render | **å”¯ä¸€å¿…é¡»å®ç°**ï¼Œè¿”å› JSXï¼Œå¿…é¡»æ˜¯çº¯å‡½æ•° |
| `getSnapshotBeforeUpdate()` | Pre-commit | DOM æ›´æ–°å‰æ•è·ä¿¡æ¯ï¼ˆå¦‚æ»šåŠ¨ä½ç½®ï¼‰ |
| `componentDidMount()` | Commit | æŒ‚è½½åè°ƒç”¨ï¼Œé€‚åˆç½‘ç»œè¯·æ±‚ã€DOMæ“ä½œã€æ·»åŠ è®¢é˜… |
| `componentDidUpdate()` | Commit | æ›´æ–°åè°ƒç”¨ï¼Œå¯å¯¹æ¯” props è¿›è¡Œæ¡ä»¶æ€§æ“ä½œ |
| `componentWillUnmount()` | å¸è½½ | å¸è½½å‰è°ƒç”¨ï¼Œæ¸…ç†å®šæ—¶å™¨ã€å–æ¶ˆè®¢é˜…ã€å–æ¶ˆè¯·æ±‚ |

---

## ä¸‰ã€å¼‚æ­¥æ•°æ®è¯·æ±‚åº”åœ¨å“ªé‡Œè°ƒç”¨ï¼Ÿ

### âœ… æ¨èï¼šcomponentDidMount()

- é¦–æ¬¡æŒ‚è½½æ—¶æ‰§è¡Œï¼Œä¸ä¼šé‡å¤è¯·æ±‚
- åœ¨ Commit é˜¶æ®µï¼ŒDOM å·²å¯ç”¨
- å¯ä»¥å®‰å…¨è°ƒç”¨ setState

### ğŸ”„ æ¡ä»¶è¯·æ±‚ï¼šcomponentDidUpdate()

- å½“ props å˜åŒ–éœ€è¦é‡æ–°è¯·æ±‚æ—¶ä½¿ç”¨
- **âš ï¸ å¿…é¡»ç”¨æ¡ä»¶åˆ¤æ–­åŒ…è£¹ï¼Œå¦åˆ™æ­»å¾ªç¯ï¼**

```javascript
componentDidUpdate(prevProps) {
  // âš ï¸ å¿…é¡»æ¯”è¾ƒï¼Œå¦åˆ™æ— é™å¾ªç¯
  if (prevProps.userId !== this.props.userId) {
    this.fetchData(this.props.userId);
  }
}
```

### ğŸ§¹ æ¸…ç†ï¼šcomponentWillUnmount()

å–æ¶ˆæœªå®Œæˆçš„è¯·æ±‚ï¼Œæ¸…é™¤ componentDidMount ä¸­åˆ›å»ºçš„è®¢é˜…ã€‚

---

## å››ã€useEffect / useLayoutEffect ä¸ç”Ÿå‘½å‘¨æœŸå¯¹ç…§

| Class ç”Ÿå‘½å‘¨æœŸ | Hooks ç­‰ä»·å†™æ³• | æ‰§è¡Œæ—¶æœº |
|--------------|---------------|---------|
| `componentDidMount` | `useEffect(() => {}, [])` | æŒ‚è½½åï¼ˆæµè§ˆå™¨ç»˜åˆ¶åï¼‰ |
| `componentDidUpdate` | `useEffect(() => {}, [deps])` | ä¾èµ–å˜åŒ–å |
| `componentWillUnmount` | `useEffect(() => () => {}, [])` | å¸è½½å‰ï¼ˆæ¸…ç†å‡½æ•°ï¼‰ |
| `DidMount + DidUpdate` | `useLayoutEffect(() => {}, [])` | DOMåï¼Œç»˜åˆ¶å‰ï¼ˆåŒæ­¥ï¼‰ |

### âš ï¸ å…³é”®åŒºåˆ«

- `useEffect` åœ¨æµè§ˆå™¨ç»˜åˆ¶**ä¹‹å**å¼‚æ­¥æ‰§è¡Œ
- `componentDidMount/Update` åœ¨ç»˜åˆ¶**ä¹‹å‰**åŒæ­¥æ‰§è¡Œ
- éœ€è¦åŒæ­¥æ‰§è¡Œï¼ˆé˜²æ­¢é—ªçƒï¼‰æ—¶ï¼Œä½¿ç”¨ `useLayoutEffect`

### useLayoutEffect vs useEffect

| ç‰¹æ€§ | useLayoutEffect | useEffect |
|-----|----------------|-----------|
| æ‰§è¡Œæ—¶æœº | DOM æ›´æ–°åï¼Œç»˜åˆ¶å‰ | æµè§ˆå™¨ç»˜åˆ¶å |
| æ‰§è¡Œæ–¹å¼ | åŒæ­¥ï¼Œé˜»å¡ç»˜åˆ¶ | å¼‚æ­¥ï¼Œä¸é˜»å¡ |
| é€‚ç”¨åœºæ™¯ | è¯»å–/ä¿®æ”¹ DOM å¸ƒå±€ | å¤§å¤šæ•°åœºæ™¯é¦–é€‰ |

---

## äº”ã€constructor ä¸­ä½¿ç”¨ super çš„æ„ä¹‰

- **super** æŒ‡å‘çˆ¶ç±»æ„é€ å‡½æ•°ï¼ˆReact.Componentï¼‰
- è°ƒç”¨ `super` å‰**ä¸èƒ½ä½¿ç”¨ this**
- `super(props)` åå¯åœ¨ constructor ä¸­è®¿é—® `this.props`
- `super()` ä¸ä¼ å‚ï¼Œconstructor ä¸­ `this.props` ä¸º undefined

```javascript
// âœ… æ¨èå†™æ³•
class MyComponent extends React.Component {
  constructor(props) {
    super(props);  // å¯è®¿é—® this.props
    console.log(this.props);  // âœ… æœ‰å€¼
  }
}

// ğŸ’¡ ç°ä»£å†™æ³•ï¼šç”¨ class fieldsï¼Œå¯ä¸å†™ constructor
class MyComponent extends React.Component {
  state = { count: 0 };  // ç›´æ¥å®šä¹‰
  handleClick = () => { };  // ç®­å¤´å‡½æ•°è‡ªåŠ¨ç»‘å®š this
}
```

---

## å…­ã€ä¸ºä»€ä¹ˆç”¨ Hooks æ›¿ä»£ç”Ÿå‘½å‘¨æœŸï¼Ÿ

### Class ç»„ä»¶ç—›ç‚¹

| é—®é¢˜ | è¯´æ˜ |
|-----|------|
| é€»è¾‘åˆ†æ•£ | ç›¸å…³é€»è¾‘è¢«æ‹†åˆ°ä¸åŒç”Ÿå‘½å‘¨æœŸ |
| å¤ç”¨å›°éš¾ | HOC/render props å¯¼è‡´åµŒå¥—åœ°ç‹± |
| this ç»‘å®š | éœ€è¦æ‰‹åŠ¨ç»‘å®šï¼Œæ˜“å‡ºé”™ |
| éš¾ä»¥ä¼˜åŒ– | ä¸åˆ©äºé¢„ç¼–è¯‘ä¼˜åŒ– |

### Hooks ä¼˜åŠ¿

| ä¼˜åŠ¿ | è¯´æ˜ |
|-----|------|
| é€»è¾‘å†…èš | ç›¸å…³ä»£ç æ”¾åœ¨ä¸€èµ· |
| è‡ªå®šä¹‰ Hook | è½»æ¾å¤ç”¨çŠ¶æ€é€»è¾‘ |
| æ—  this | å‡½æ•°å¼ï¼Œæ›´ç®€æ´ |
| æ›´ç»†ç²’åº¦ | useMemo/useCallback ç²¾ç¡®ä¼˜åŒ– |

```javascript
// âŒ Class: è®¢é˜…é€»è¾‘åˆ†æ•£åœ¨ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸ
class Example {
  componentDidMount() { subscribe(id); }
  componentWillUnmount() { unsubscribe(id); }
}

// âœ… Hooks: ç›¸å…³é€»è¾‘æ”¾åœ¨ä¸€èµ·
function Example({ id }) {
  useEffect(() => {
    subscribe(id);
    return () => unsubscribe(id);  // æ¸…ç†ä¸è®¢é˜…åœ¨ä¸€èµ·
  }, [id]);
}
```

---

## ä¸ƒã€ç»å…¸é¢è¯•ä»£ç 

### é¢è¯•é¢˜ 1ï¼šClass ç»„ä»¶æ•°æ®è¯·æ±‚ ğŸ”¥

```javascript
class UserProfile extends React.Component {
  state = { user: null, loading: true };
  controller = new AbortController();

  async componentDidMount() {
    await this.fetchUser(this.props.userId);
  }

  async componentDidUpdate(prevProps) {
    // âš ï¸ å¿…é¡»æ¡ä»¶åˆ¤æ–­ï¼
    if (prevProps.userId !== this.props.userId) {
      await this.fetchUser(this.props.userId);
    }
  }

  componentWillUnmount() {
    this.controller.abort();  // å–æ¶ˆè¯·æ±‚
  }

  fetchUser = async (id) => {
    this.setState({ loading: true });
    try {
      const res = await fetch(`/api/user/${id}`, { 
        signal: this.controller.signal 
      });
      const user = await res.json();
      this.setState({ user, loading: false });
    } catch (e) {
      if (e.name !== 'AbortError') throw e;
    }
  };

  render() {
    const { user, loading } = this.state;
    if (loading) return 'Loading...';
    return <div>{user?.name}</div>;
  }
}
```

### é¢è¯•é¢˜ 2ï¼šHooks ç­‰ä»·å®ç° ğŸ”¥

```javascript
function UserProfile({ userId }) {
  const [user, setUser] = useState(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    const controller = new AbortController();

    const fetchUser = async () => {
      setLoading(true);
      try {
        const res = await fetch(`/api/user/${userId}`, {
          signal: controller.signal
        });
        const data = await res.json();
        setUser(data);
        setLoading(false);
      } catch (e) {
        if (e.name !== 'AbortError') throw e;
      }
    };

    fetchUser();
    return () => controller.abort();  // æ¸…ç†
  }, [userId]);

  if (loading) return 'Loading...';
  return <div>{user?.name}</div>;
}
```

### é¢è¯•é¢˜ 3ï¼šuseLayoutEffect é˜²é—ªçƒ â­

```javascript
function Tooltip({ targetRef, content }) {
  const [pos, setPos] = useState({ top: 0, left: 0 });

  // âœ… useLayoutEffectï¼šDOMåç«‹å³åŒæ­¥æ‰§è¡Œï¼Œé˜²é—ªçƒ
  useLayoutEffect(() => {
    if (!targetRef.current) return;
    const rect = targetRef.current.getBoundingClientRect();
    setPos({ top: rect.bottom + 8, left: rect.left + rect.width / 2 });
  }, [targetRef]);

  return <div style={{ position: 'absolute', ...pos }}>{content}</div>;
}
// âŒ ç”¨ useEffect ä¼šå…ˆæ¸²æŸ“åœ¨(0,0)å†è·³åˆ°æ­£ç¡®ä½ç½® = é—ªçƒ
```

### é¢è¯•é¢˜ 4ï¼šè‡ªå®šä¹‰ Hook å¤ç”¨é€»è¾‘ â­

```javascript
function useFetch(url) {
  const [data, setData] = useState(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);

  useEffect(() => {
    const ctrl = new AbortController();
    setLoading(true);
    setError(null);

    fetch(url, { signal: ctrl.signal })
      .then(r => r.json())
      .then(d => { setData(d); setLoading(false); })
      .catch(e => {
        if (e.name !== 'AbortError') {
          setError(e);
          setLoading(false);
        }
      });

    return () => ctrl.abort();
  }, [url]);

  return { data, loading, error };
}

// ä½¿ç”¨ï¼šä»»ä½•ç»„ä»¶éƒ½èƒ½å¤ç”¨
function UserList() {
  const { data, loading } = useFetch('/api/users');
}
```

---

## å…«ã€é¢è¯•é—®ç­”é€ŸæŸ¥

| é—®é¢˜ | ç­”æ¡ˆ |
|-----|------|
| ä¸ºä»€ä¹ˆä¸åœ¨ constructor ä¸­è¯·æ±‚ï¼Ÿ | 1) SSR ä¼šæ‰§è¡Œä¸¤æ¬¡ 2) æ•°æ®è¿”å›æ—¶ç»„ä»¶å¯èƒ½æœªæŒ‚è½½ 3) æ¨è componentDidMount |
| componentDidUpdate å¦‚ä½•é¿å…æ­»å¾ªç¯ï¼Ÿ | å¿…é¡»æ¡ä»¶åˆ¤æ–­åŒ…è£¹ setStateï¼Œæ¯”è¾ƒ prevProps ä¸å½“å‰å€¼ |
| useEffect [] å’Œæ— ä¾èµ–åŒºåˆ«ï¼Ÿ | [] = åªæŒ‚è½½æ—¶æ‰§è¡Œä¸€æ¬¡ï¼›æ— ä¾èµ– = æ¯æ¬¡æ¸²æŸ“åéƒ½æ‰§è¡Œ |
| ä»€ä¹ˆæ—¶å€™ç”¨ useLayoutEffectï¼Ÿ | åŒæ­¥è¯»å–/ä¿®æ”¹ DOM å¸ƒå±€ï¼Œé˜²é—ªçƒã€‚å¦‚æµ‹é‡å°ºå¯¸ã€å®šä½ tooltip |
| Render é˜¶æ®µæ–¹æ³•ä¸ºä½•å¯èƒ½å¤šæ¬¡æ‰§è¡Œï¼Ÿ | Concurrent Mode å¯ä¸­æ–­æ¸²æŸ“ï¼Œé«˜ä¼˜å…ˆçº§æ’å…¥åé‡æ–°æ‰§è¡Œã€‚æ‰€ä»¥å¿…é¡»æ˜¯çº¯å‡½æ•° |
| getDerivedStateFromProps ä¸ºä½•æ˜¯é™æ€ï¼Ÿ | é˜²æ­¢è®¿é—® thisï¼Œå¼ºåˆ¶ä¿æŒçº¯å‡€ï¼Œåªä» props æ´¾ç”Ÿ state |

---

## ä¹ã€æ ¸å¿ƒè¦ç‚¹æ€»ç»“

```
ğŸ“¦ æŒ‚è½½é˜¶æ®µï¼šconstructor â†’ getDerivedStateFromProps â†’ render â†’ componentDidMount
ğŸ”„ æ›´æ–°é˜¶æ®µï¼šgetDerivedStateFromProps â†’ shouldComponentUpdate â†’ render â†’ getSnapshotBeforeUpdate â†’ componentDidUpdate  
ğŸ’¨ å¸è½½é˜¶æ®µï¼šcomponentWillUnmount
```

### ğŸ¯ è®°å¿†å£è¯€

> **Render é˜¶æ®µçº¯å‡€å¯ä¸­æ–­ï¼ŒCommit é˜¶æ®µå‰¯ä½œç”¨å®‰å…¨è·‘**
> **æŒ‚è½½è¯·æ±‚ç”¨ DidMountï¼Œæ›´æ–°å¿…é¡»æœ‰æ¡ä»¶**
> **useEffect å¼‚æ­¥ä¸é˜»å¡ï¼ŒuseLayoutEffect åŒæ­¥é˜²é—ªçƒ**
> **æ¸…ç†å‡½æ•°ä¸èƒ½å¿˜ï¼Œè®¢é˜…å®šæ—¶å™¨éƒ½è¦æ¸…**

---

**ä¸€å¥è¯æ€»ç»“**ï¼šç”Ÿå‘½å‘¨æœŸçš„æœ¬è´¨æ˜¯åœ¨ç»„ä»¶"å‡ºç”Ÿâ†’æˆé•¿â†’æ­»äº¡"çš„ä¸åŒé˜¶æ®µæ’å…¥å‰¯ä½œç”¨ï¼ŒHooks åˆ™å°†è¿™äº›åˆ†æ•£çš„æ—¶æœºç»Ÿä¸€ä¸º"ä¾èµ–å˜åŒ–æ—¶æ‰§è¡Œeffectï¼Œè¿”å›æ¸…ç†å‡½æ•°"çš„å¿ƒæ™ºæ¨¡å‹ã€‚