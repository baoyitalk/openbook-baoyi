---
sidebar_position: 0
sidebar_label: "0-操作符引言"
---


第一性原理拆解并总结 附带经典面试代码
## 第一性原理拆解：操作符

### 核心问题：如何安全、简洁地处理"可能不存在的值"？

---

## 一、问题的根源

```javascript
// 实际开发中经常遇到
let user = { name: "张三" };  // 没有 address 属性

console.log(user.address.city);  // ❌ 报错！Cannot read property 'city' of undefined
```

**传统解决方案：层层判断，代码冗长**

```javascript
let city;
if (user && user.address && user.address.city) {
    city = user.address.city;
} else {
    city = '默认城市';
}
```

**这些操作符的本质：用简洁语法解决"值可能不存在"的问题**

---

## 二、三个赋值运算符

| 运算符 | 含义 | 触发赋值的条件 | 等价代码 |
|--------|------|---------------|----------|
| `\|\|=` | 或赋值 | x 是**假值** | `if (!x) x = y` |
| `&&=` | 与赋值 | x 是**真值** | `if (x) x = y` |
| `??=` | 空值赋值 | x 是 **null/undefined** | `if (x == null) x = y` |

### 关键区别：假值 vs 空值

```javascript
// 假值（falsy）：0, '', false, null, undefined, NaN  共6个
// 空值（nullish）：null, undefined  只有2个

let count = 0;

count ||= 10;   // count = 10 ← 0 被当作假值，覆盖了！
count ??= 10;   // count = 0  ← 0 不是空值，保留
```

---

## 三、可选链 `?.`

**作用：安全访问可能不存在的属性，遇到 null/undefined 就停止，返回 undefined**

```javascript
// 三种用法
obj?.prop       // 属性访问
arr?.[index]    // 数组/动态属性
func?.()        // 函数调用

// 实际效果
user?.address?.city
// 等价于
(user == null) ? undefined : 
    (user.address == null) ? undefined : 
        user.address.city
```

---

## 四、组合使用

```javascript
// 可选链 + 空值合并 = 安全取值 + 默认值
let city = user?.address?.city ?? '未知城市';
```

---

## 总结

```
┌────────────────────────────────────────────────────────┐
│              处理"可能不存在的值"                        │
├────────────────────────────────────────────────────────┤
│                                                        │
│   取值阶段：?.（可选链）                                │
│   └── 安全访问，不报错                                  │
│                                                        │
│   赋值阶段：选择合适的赋值运算符                         │
│   ├── ||=  → 假值就赋值（0、'' 会被覆盖）               │
│   ├── &&=  → 真值才赋值（用于条件更新）                 │
│   └── ??=  → 空值才赋值（保留 0、''）                   │
│                                                        │
│   组合：  value = obj?.prop ?? '默认值'                │
│                                                        │
└────────────────────────────────────────────────────────┘
```

**一句话：用 `?.` 安全取值，用 `??=` / `||=` 设默认值，告别繁琐的 if 判断。**


### 核心规则
![](images/0-操作符引言-20260122113219.png)



### &&（逻辑与）-找假值

```js
// 左边假 → 直接返回左边（短路）
false && "hello"    // false
0 && "hello"        // 0
"" && "hello"       // ""
null && "hello"     // null
undefined && "hello" // undefined

// 左边真 → 返回右边
true && "hello"     // "hello"
1 && "hello"        // "hello"
"hi" && "hello"     // "hello"

```

||（逻辑或）-找真值

```js
// 左边假 → 直接返回左边（短路）
false && "hello"    // false
0 && "hello"        // 0
"" && "hello"       // ""
null && "hello"     // null
undefined && "hello" // undefined

// 左边真 → 返回右边
true && "hello"     // "hello"
1 && "hello"        // "hello"
"hi" && "hello"     // "hello"


```

假值
```
false, 0, "", null, undefined, NaN

```

`&&` 遇假就停，`||` 遇真就停，**返回的是停下来那个值本身**（不是 `true/false`）