
# ç¬¬ä¸€æ€§åŸç†æ‹†è§£ JavaScript é—­åŒ…

## ğŸ§  ç¬¬ä¸€æ€§åŸç†æ–¹æ³•

**ä»æœ€åŸºæœ¬çš„äº‹å®å‡ºå‘ï¼Œé€å±‚æ¨å¯¼ï¼Œè€Œéæ­»è®°å®šä¹‰ã€‚**

---

## ç¬¬ä¸€å±‚ï¼šä¸¤ä¸ªåŸºæœ¬äº‹å®

### äº‹å®1ï¼šè¯æ³•ä½œç”¨åŸŸï¼ˆé™æ€ä½œç”¨åŸŸï¼‰

> å‡½æ•°èƒ½è®¿é—®å“ªäº›å˜é‡ï¼Œåœ¨**å®šä¹‰æ—¶**å°±ç¡®å®šäº†ï¼Œä¸æ˜¯è°ƒç”¨æ—¶ã€‚

```javascript
var name = 'John';

function greeting() {
    let message = 'Hi';
    console.log(message + ' ' + name);
}
```

- `message` â†’ åªèƒ½åœ¨ `greeting()` å†…è®¿é—®
- `name` â†’ `greeting()` å®šä¹‰æ—¶å°±èƒ½"çœ‹åˆ°"ï¼Œæ‰€ä»¥èƒ½è®¿é—®

### äº‹å®2ï¼šå‡½æ•°å¯ä»¥åµŒå¥—å¹¶è¿”å›

```javascript
function å¤–éƒ¨å‡½æ•°() {
    function å†…éƒ¨å‡½æ•°() { }
    return å†…éƒ¨å‡½æ•°;
}
```

---

## ç¬¬äºŒå±‚ï¼šç»„åˆäº‹å®ï¼Œäº§ç”Ÿé—®é¢˜

æŠŠä¸¤ä¸ªäº‹å®ç»„åˆï¼š

```javascript
function person() {
    var name = "John";      // å±€éƒ¨å˜é‡
    function showName() {
        console.log(name);  // å†…éƒ¨å‡½æ•°è®¿é—®å¤–éƒ¨å˜é‡
    }
    return showName;        // è¿”å›å†…éƒ¨å‡½æ•°
}

const getPerson = person(); // person() æ‰§è¡Œå®Œæ¯•
getPerson();                // â“ name è¿˜èƒ½è®¿é—®å—ï¼Ÿ
```

**å…³é”®é—®é¢˜**ï¼š
| æ­£å¸¸é€»è¾‘ | å®é™…æƒ…å†µ |
|---------|---------|
| `person()` æ‰§è¡Œå®Œ â†’ `name` åº”è¯¥é”€æ¯ | `showName` è¿˜åœ¨å¼•ç”¨ `name` |

---

## ç¬¬ä¸‰å±‚ï¼šæ¨å¯¼å‡ºé—­åŒ…

**JavaScript çš„å¤„ç†æ–¹å¼**ï¼š

```
person() æ‰§è¡Œå®Œæ¯•
    â†“
name æœ¬åº”é”€æ¯
    â†“
ä½† show

å¥½é—®é¢˜ï¼é—­åŒ…ç¡®å®æœ‰**ä¸å¯æ›¿ä»£**çš„åœºæ™¯ ğŸ‘‡

---

## æ‹†è§£1

## 1ï¸âƒ£ ç§æœ‰å˜é‡ï¼ˆæœ€ç»å…¸ï¼‰

```javascript
function createWallet() {
    let money = 100;  // å¤–éƒ¨æ— æ³•ç›´æ¥è®¿é—®
  
    return {
        spend: function(amount) {
            if (amount <= money) {
                money -= amount;
                return true;
            }
            return false;
        },
        check: function() {
            return money;
        }
    };
}

const wallet = createWallet();
wallet.check();     // 100
wallet.spend(30);   // true
wallet.check();     // 70
wallet.money;       // undefined â† è®¿é—®ä¸åˆ°ï¼
```

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  createWallet ä½œç”¨åŸŸ         â”‚
â”‚                             â”‚
â”‚   money = 70  ğŸ”’ ç§æœ‰çš„      â”‚
â”‚       â†‘                     â”‚
â”‚   â”Œâ”€â”€â”€â”´â”€â”€â”€â”                 â”‚
â”‚   â”‚ spend â”‚ â† èƒ½è®¿é—® money   â”‚
â”‚   â”‚ check â”‚ â† èƒ½è®¿é—® money   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“ è¿”å›
    å¤–éƒ¨åªèƒ½ç”¨ spend/check
    ä¸èƒ½ç›´æ¥æ”¹ money
```

**let æ›¿ä»£ä¸äº†**ï¼šlet åªæ˜¯å—ä½œç”¨åŸŸï¼Œæ— æ³•å®ç°"ç§æœ‰"

---

## 2ï¸âƒ£ å‡½æ•°å·¥å‚

```javascript
function createMultiplier(x) {
    return function(y) {
        return x * y;
    };
}

const double = createMultiplier(2);
const triple = createMultiplier(3);

double(10);  // 20
triple(10);  // 30
```

```
double è®°ä½äº† x=2
triple è®°ä½äº† x=3
        â†“
å„è‡ªç‹¬ç«‹ï¼Œäº’ä¸å½±å“
```

---

## 3ï¸âƒ£ å‡½æ•°æŸ¯é‡ŒåŒ–

```javascript
// æ™®é€šå†™æ³•
function add(a, b, c) {
    return a + b + c;
}
add(1, 2, 3);  // 6

// æŸ¯é‡ŒåŒ–ï¼ˆé—­åŒ…å®ç°ï¼‰
function curriedAdd(a) {
    return function(b) {
        return function(c) {
            return a + b + c;  // è®°ä½äº† a å’Œ b
        };
    };
}
curriedAdd(1)(2)(3);  // 6

// å®ç”¨åœºæ™¯
const addTax = curriedAdd(0.1);  // å›ºå®šç¨ç‡ 10%
const addShipping = addTax(5);    // å›ºå®šè¿è´¹ 5
addShipping(100);  // 0.1 + 5 + 100 = 105.1
```

---

## 4ï¸âƒ£ é˜²æŠ–/èŠ‚æµï¼ˆå®é™…å¼€å‘å¸¸ç”¨ï¼‰

```javascript
function debounce(fn, delay) {
    let timer = null;  // é—­åŒ…ä¿å­˜ timer
  
    return function(...args) {
        clearTimeout(timer);
        timer = setTimeout(() => {
            fn.apply(this, args);
        }, delay);
    };
}

// ä½¿ç”¨
const search = debounce(function(keyword) {
    console.log('æœç´¢:', keyword);
}, 500);

// å¿«é€Ÿè¾“å…¥ï¼Œåªæ‰§è¡Œæœ€åä¸€æ¬¡
search('a');
search('ab');
search('abc');  // åªæœ‰è¿™ä¸ªä¼šæ‰§è¡Œ
```

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  debounce ä½œç”¨åŸŸ          â”‚
â”‚                          â”‚
â”‚   timer = ... ğŸ”’         â”‚
â”‚      â†‘                   â”‚
â”‚   è¿”å›çš„å‡½æ•°èƒ½è®¿é—® timer   â”‚
â”‚   æ¯æ¬¡è°ƒç”¨å…±äº«åŒä¸€ä¸ª timer â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5ï¸âƒ£ ç¼“å­˜/è®°å¿†åŒ–

```javascript
function memoize(fn) {
    const cache = {};  // é—­åŒ…ä¿å­˜ç¼“å­˜
  
    return function(n) {
        if (cache[n] !== undefined) {
            console.log('ä»ç¼“å­˜å–');
            return cache[n];
        }
        console.log('è®¡ç®—ä¸­...');
        cache[n] = fn(n);
        return cache[n];
    };
}

const factorial = memoize(function(n) {
    return n <= 1 ? 1 : n * factorial(n - 1);
});

factorial(5);  // è®¡ç®—ä¸­... â†’ 120
factorial(5);  // ä»ç¼“å­˜å– â†’ 120
```

---

## 6ï¸âƒ£ æ¨¡å—æ¨¡å¼ï¼ˆES6 Module ä¹‹å‰çš„æ–¹æ¡ˆï¼‰

```javascript
const Calculator = (function() {
    // ç§æœ‰
    let result = 0;
  
    function validate(n) {
        return typeof n === 'number';
    }
  
    // å…¬å¼€
    return {
        add: function(n) {
            if (validate(n)) result += n;
            return this;
        },
        getResult: function() {
            return result;
        }
    };
})();

Calculator.add(5).add(3).getResult();  // 8
Calculator.result;    // undefined
Calculator.validate;  // undefined
```

---

## æ€»ç»“ï¼šé—­åŒ…ä¸å¯æ›¿ä»£çš„åœºæ™¯

| åœºæ™¯ | æ ¸å¿ƒèƒ½åŠ› | let èƒ½æ›¿ä»£ï¼Ÿ |
|------|---------|-------------|
| ç§æœ‰å˜é‡ | éšè—æ•°æ® | âŒ |
| å‡½æ•°å·¥å‚ | è®°ä½å‚æ•° | âŒ |
| æŸ¯é‡ŒåŒ– | åˆ†æ­¥ä¼ å‚ | âŒ |
| é˜²æŠ–èŠ‚æµ | è·¨è°ƒç”¨ä¿æŒçŠ¶æ€ | âŒ |
| ç¼“å­˜ | æŒä¹…åŒ–å­˜å‚¨ | âŒ |
| æ¨¡å—æ¨¡å¼ | å°è£… | âŒï¼ˆä½†æœ‰ ES6 Moduleï¼‰ |

---

## ä¸€å¥è¯

> **let è§£å†³çš„æ˜¯ä½œç”¨åŸŸé—®é¢˜**
> **é—­åŒ…è§£å†³çš„æ˜¯"å‡½æ•°è®°ä½å¤–éƒ¨å˜é‡"çš„é—®é¢˜**

ä¸¤è€…è§£å†³çš„æ˜¯**ä¸åŒå±‚é¢**çš„é—®é¢˜ï¼

é—­åŒ… = **å‡½æ•° + å®ƒèƒ½è®¿é—®çš„å¤–éƒ¨å˜é‡** = æœ‰è®°å¿†çš„å‡½æ•° ğŸ§ 



| åœºæ™¯ | æ ¸å¿ƒèƒ½åŠ› | let èƒ½æ›¿ä»£ï¼Ÿ |
|------|---------|-------------|
| ç§æœ‰å˜é‡ | éšè—æ•°æ® | âŒ |
| å‡½æ•°å·¥å‚ | è®°ä½å‚æ•° | âŒ |
| æŸ¯é‡ŒåŒ– | åˆ†æ­¥ä¼ å‚ | âŒ |
| é˜²æŠ–èŠ‚æµ | è·¨è°ƒç”¨ä¿æŒçŠ¶æ€ | âŒ |
| ç¼“å­˜ | æŒä¹…åŒ–å­˜å‚¨ | âŒ |
| æ¨¡å—æ¨¡å¼ | å°è£… | âŒï¼ˆä½†æœ‰ ES6 Moduleï¼‰ |




---


## æ‹†è§£2
å¥½é—®é¢˜ï¼ğŸ¯ ä½ é—®åˆ°ç‚¹å­ä¸Šäº†ï¼

---

## ç¡®å®ï¼Œç®€å•æƒ…å†µç”¨å˜é‡å°±è¡Œ

```javascript
// æ–¹æ¡ˆAï¼šç›´æ¥ç”¨å˜é‡
const taxRate = 0.08;
function calcTax(price) {
  return price * (1 + taxRate);
}

calcTax(100);  // 108
```

å®Œå…¨æ²¡é—®é¢˜ï¼é‚£ä¸ºä»€ä¹ˆè¿˜è¦é—­åŒ…ï¼Ÿ

---

## å…³é”®åŒºåˆ«ï¼šéœ€è¦"å¤šå¥—é…ç½®åŒæ—¶å­˜åœ¨"æ—¶

### âŒ å˜é‡æ–¹å¼çš„é—®é¢˜

```javascript
let taxRate = 0.08;

function calcTax(price) {
  return price * (1 + taxRate);
}

// ç¾å›½è®¢å•
taxRate = 0.08;
const ç¾å›½ä»· = calcTax(100);  // 108

// æ¬§æ´²è®¢å•
taxRate = 0.20;
const æ¬§æ´²ä»· = calcTax(100);  // 120

// âš ï¸ é—®é¢˜æ¥äº†ï¼ä¹‹å‰çš„ç¾å›½ç¨ç‡è¢«è¦†ç›–äº†
// å¦‚æœå†ç®—ç¾å›½è®¢å•ï¼Œå¾—é‡æ–°è®¾ç½® taxRate
```

**æ¯æ¬¡åˆ‡æ¢éƒ½è¦æ”¹å˜é‡ï¼Œå®¹æ˜“å‡ºé”™ï¼**

---

### âœ… é—­åŒ…æ–¹å¼

```javascript
function createTaxCalc(taxRate) {
  return function(price) {
    return price * (1 + taxRate);
  };
}

const ç¾å›½ç¨ = createTaxCalc(0.08);
const æ¬§æ´²ç¨ = createTaxCalc(0.20);
const æ—¥æœ¬ç¨ = createTaxCalc(0.10);

// ä¸‰å¥—é…ç½®åŒæ—¶å­˜åœ¨ï¼Œäº’ä¸å¹²æ‰°
ç¾å›½ç¨(100);  // 108
æ¬§æ´²ç¨(100);  // 120
æ—¥æœ¬ç¨(100);  // 110

// éšæ—¶å¯ç”¨ï¼Œä¸ç”¨åˆ‡æ¢
ç¾å›½ç¨(200);  // 216
```

---

## ä¸€å¥è¯æ€»ç»“

| åœºæ™¯ | ç”¨ä»€ä¹ˆ |
|------|--------|
| åªéœ€è¦**ä¸€å¥—é…ç½®** | æ™®é€šå˜é‡å°±å¤Ÿ |
| éœ€è¦**å¤šå¥—é…ç½®å¹¶å­˜** | é—­åŒ…æ›´åˆé€‚ |

---

## å†ä¸¾ä¸ªç›´è§‚ä¾‹å­

```javascript
// ä½ è¦åŒæ—¶ç®¡ç†3ä¸ªè®¡æ•°å™¨

// âŒ å˜é‡æ–¹å¼ï¼šåªèƒ½æœ‰ä¸€ä¸ª
let count = 0;
function add() { count++; }

// âœ… é—­åŒ…æ–¹å¼ï¼šæƒ³è¦å‡ ä¸ªæœ‰å‡ ä¸ª
function createCounter() {
  let count = 0;
  return function() { 
    return ++count; 
  };
}

const è®¡æ•°å™¨A = createCounter();
const è®¡æ•°å™¨B = createCounter();
const è®¡æ•°å™¨C = createCounter();

è®¡æ•°å™¨A();  // 1
è®¡æ•°å™¨A();  // 2
è®¡æ•°å™¨B();  // 1  â† ç‹¬ç«‹çš„ï¼
è®¡æ•°å™¨A();  // 3
```

---

æ‰€ä»¥é—­åŒ…çš„æ ¸å¿ƒä»·å€¼æ˜¯ï¼š**åˆ›å»ºå¤šä¸ªç‹¬ç«‹çš„"ç§æœ‰ç©ºé—´"**

æ˜ç™½äº†å—ï¼Ÿè¿˜æœ‰ç–‘é—®ç»§ç»­é—®ï¼



# å‡½æ•°æŸ¯ç†åŒ–


1924å¹´ SchÃ¶nfinkel å‘æ˜æ¦‚å¿µ
         â†“
1930s  Haskell Curry å‘å±•å®Œå–„
         â†“
åäººç”¨ Curry çš„å§“æ°å‘½å
         â†“
    "Currying" æŸ¯é‡ŒåŒ–
         â†“
éŸ³è¯‘åˆ°ä¸­æ–‡ â†’ æŸ¯é‡ŒåŒ–


æ‹†è§£ å‡½æ•°æŸ¯ç†åŒ–ä½¿ç”¨åœºæ™¯


å¥½é—®é¢˜ï¼ä½ çš„ç›´è§‰å¾ˆæ•é”â€”â€”å®ƒä»¬ç¡®å®æœ‰ç›¸ä¼¼ä¹‹å¤„ã€‚è®©æˆ‘æ¥å˜æ¸…åŒºåˆ«å’ŒçœŸæ­£çš„ä½¿ç”¨åœºæ™¯ã€‚

---

## æŸ¯é‡ŒåŒ– vs å·¥å‚æ¨¡å¼

### è¡¨é¢ç›¸ä¼¼

```javascript
// å·¥å‚æ¨¡å¼
function createAdder(x) {
    return function(y) {
        return x + y;
    }
}
const add5 = createAdder(5);

// æŸ¯é‡ŒåŒ–
function curriedAdd(x) {
    return function(y) {
        return x + y;
    }
}
const add5 = curriedAdd(5);

// çœ‹èµ·æ¥ä¸€æ¨¡ä¸€æ ·ï¼ğŸ˜…
```

### æœ¬è´¨åŒºåˆ«

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                         â”‚
â”‚   å·¥å‚æ¨¡å¼ï¼š                                             â”‚
â”‚   â”œâ”€ ç›®çš„ï¼šåˆ›å»ºå¯¹è±¡/å‡½æ•°                                 â”‚
â”‚   â”œâ”€ å…³æ³¨ï¼šå°è£…åˆ›å»ºé€»è¾‘                                  â”‚
â”‚   â””â”€ æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼ˆè§£å†³ç‰¹å®šé—®é¢˜çš„å¥—è·¯ï¼‰                  â”‚
â”‚                                                         â”‚
â”‚   æŸ¯é‡ŒåŒ–ï¼š                                               â”‚
â”‚   â”œâ”€ ç›®çš„ï¼šè½¬æ¢å‡½æ•°ç­¾å                                  â”‚
â”‚   â”œâ”€ å…³æ³¨ï¼šå‚æ•°çš„åˆ†æ­¥ä¼ é€’                                â”‚
â”‚   â””â”€ æ˜¯ä¸€ç§æ•°å­¦å˜æ¢ï¼ˆæœ‰ä¸¥æ ¼å®šä¹‰ï¼‰                         â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å·¥å‚æ¨¡å¼å¯èƒ½ç”¨æŸ¯é‡ŒåŒ–å®ç°
ä½†æŸ¯é‡ŒåŒ–ä¸ä¸€å®šæ˜¯å·¥å‚æ¨¡å¼
```

---

## æŸ¯é‡ŒåŒ–çš„çœŸæ­£ä»·å€¼åœºæ™¯

### åœºæ™¯1ï¼šå‡½æ•°ç»„åˆï¼ˆæœ€æ ¸å¿ƒä»·å€¼ï¼‰

```javascript
// æ²¡æœ‰æŸ¯é‡ŒåŒ– â€”â€” å¾ˆéš¾ç»„åˆ
function map(fn, array) { ... }
function filter(fn, array) { ... }

// æƒ³ç»„åˆï¼Ÿå¾ˆéº»çƒ¦
const result = map(double, filter(isEven, data));

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// æŸ¯é‡ŒåŒ–å â€”â€” ä¼˜é›…ç»„åˆ
const map = fn => array => array.map(fn);
const filter = fn => array => array.filter(fn);

// å¯ä»¥è¿™æ ·ç»„åˆ
const pipe = (...fns) => x => fns.reduce((v, f) => f(v), x);

const process = pipe(
    filter(x => x > 0),      // è¿‡æ»¤æ­£æ•°
    map(x => x * 2),         // ç¿»å€
    filter(x => x < 100)     // è¿‡æ»¤å°äº100çš„
);

process([1, -2, 3, 50, 60]);  // [2, 6]

// è¿™ç§ç»„åˆæ–¹å¼ï¼Œå·¥å‚æ¨¡å¼åšä¸åˆ°
```

**ä¸ºä»€ä¹ˆå·¥å‚æ¨¡å¼åšä¸åˆ°ï¼Ÿ**

```
å·¥å‚æ¨¡å¼ï¼šcreateXxx(config) â†’ è¿”å›ä¸€ä¸ªä¸œè¥¿
æŸ¯é‡ŒåŒ–ï¼š  fn(a)(b)(c) â†’ æ¯ä¸€æ­¥éƒ½è¿”å›å¯ç»§ç»­è°ƒç”¨çš„å‡½æ•°

å…³é”®å·®å¼‚ï¼š
    æŸ¯é‡ŒåŒ–çš„æ¯ä¸ªä¸­é—´ç»“æœéƒ½æ˜¯"æ ‡å‡†å½¢çŠ¶"çš„å‡½æ•°
    å¯ä»¥æ— ç¼æ¥å…¥ pipe/compose ç­‰ç»„åˆå·¥å…·
```

---

### åœºæ™¯2ï¼šPoint-free é£æ ¼

```javascript
// æ™®é€šå†™æ³•
const numbers = [1, 2, 3, 4, 5];
numbers.map(x => add(x, 10));      // éœ€è¦å†™ x =>
numbers.filter(x => greaterThan(x, 3));

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// æŸ¯é‡ŒåŒ–å - Point-freeï¼ˆæ— éœ€å†™å‚æ•°ï¼‰
const add = a => b => a + b;
const greaterThan = a => b => b > a;

numbers.map(add(10));              // ç›´æ¥ä¼ å‡½æ•°
numbers.filter(greaterThan(3));    // æ›´ç®€æ´

// ä»£ç æ›´å£°æ˜å¼ï¼Œæ›´æ˜“è¯»
```

---

### åœºæ™¯3ï¼šé…ç½®å¤ç”¨ï¼ˆè¿™é‡Œå’Œå·¥å‚ç¡®å®åƒï¼‰

```javascript
// API è¯·æ±‚é…ç½®
const request = baseURL => headers => endpoint => data =>
    fetch(baseURL + endpoint, { headers, body: JSON.stringify(data) });

// é€å±‚é…ç½®
const apiRequest = request('https://api.example.com');
const authRequest = apiRequest({ 'Authorization': 'Bearer xxx' });
const userAPI = authRequest('/users');

// æœ€ç»ˆä½¿ç”¨
userAPI({ name: 'John' });  // POST ç”¨æˆ·æ•°æ®

// ä¸åŒç¯å¢ƒå¤ç”¨
const devRequest = request('http://localhost:3000');
const prodRequest = request('https://api.prod.com');
```

---

### åœºæ™¯4ï¼šäº‹ä»¶å¤„ç†å™¨ï¼ˆReact å¸¸è§ï¼‰

```javascript
// ä¸ç”¨æŸ¯é‡ŒåŒ– â€”â€” æ¯æ¬¡éƒ½è¦åŒ…ä¸€å±‚
<button onClick={() => handleClick('save', item.id)}>Save</button>
<button onClick={() => handleClick('delete', item.id)}>Delete</button>

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// æŸ¯é‡ŒåŒ–å
const handleClick = action => id => event => {
    console.log(action, id, event);
};

<button onClick={handleClick('save')(item.id)}>Save</button>
<button onClick={handleClick('delete')(item.id)}>Delete</button>

// æ›´è¿›ä¸€æ­¥ - é¢„é…ç½®
const saveHandler = handleClick('save');
const deleteHandler = handleClick('delete');

items.map(item => (
    <button onClick={saveHandler(item.id)}>Save</button>
));
```

---

### åœºæ™¯5ï¼šå»¶è¿Ÿæ‰§è¡Œ & æƒ°æ€§æ±‚å€¼

```javascript
// æ—¥å¿—å‡½æ•° - æŸ¯é‡ŒåŒ–å®ç°æ¡ä»¶æ‰§è¡Œ
const log = level => message => {
    if (shouldLog(level)) {
        console.log(`[${level}] ${message}`);
    }
};

const debug = log('DEBUG');
const error = log('ERROR');

// åœ¨ä»£ç ä¸­ä½¿ç”¨
debug('User clicked button');  // å¼€å‘ç¯å¢ƒæ‰“å°
error('Connection failed');    // å§‹ç»ˆæ‰“å°

// å…³é”®ï¼šlog('DEBUG') æ—¶è¿˜æ²¡æ‰§è¡Œæ—¥å¿—é€»è¾‘
// åªæœ‰ä¼ å…¥ message æ—¶æ‰çœŸæ­£æ‰§è¡Œ
```

---

## ä¸å¯æ›¿ä»£çš„åœºæ™¯

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                         â”‚
â”‚  1. å‡½æ•°ç»„åˆ (pipe/compose)                             â”‚
â”‚     â†’ éœ€è¦ç»Ÿä¸€çš„å•å‚æ•°å‡½æ•°æ¥å£                           â”‚
â”‚     â†’ å·¥å‚æ¨¡å¼æ— æ³•æä¾›è¿™ç§ç»Ÿä¸€æ€§                         â”‚
â”‚                                                         â”‚
â”‚  2. Point-free ç¼–ç¨‹é£æ ¼                                 â”‚
â”‚     â†’ æ¶ˆé™¤ä¸­é—´å˜é‡ï¼Œä»£ç æ›´å£°æ˜å¼                         â”‚
â”‚     â†’ å¿…é¡»ä¾èµ–æŸ¯é‡ŒåŒ–                                    â”‚
â”‚                                                         â”‚
â”‚  3. å‡½æ•°å¼å·¥å…·åº“é…åˆ                                    â”‚
â”‚     â†’ Ramda, Lodash/fp ç­‰éƒ½åŸºäºæŸ¯é‡ŒåŒ–è®¾è®¡               â”‚
â”‚     â†’ ä¸æŸ¯é‡ŒåŒ–å°±æ— æ³•ä½¿ç”¨è¿™äº›åº“çš„ç»„åˆèƒ½åŠ›                 â”‚
â”‚                                                         â”‚
â”‚  4. ç±»å‹ç³»ç»Ÿå‹å¥½ï¼ˆTypeScript/Haskellï¼‰                  â”‚
â”‚     â†’ æŸ¯é‡ŒåŒ–å‡½æ•°çš„ç±»å‹æ¨å¯¼æ›´ç²¾ç¡®                         â”‚
â”‚     â†’ æ¯ä¸€æ­¥çš„ç±»å‹éƒ½æ¸…æ™°                                â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å®é™…å¯¹æ¯”

```javascript
// å‡è®¾è¦å®ç°ï¼šè¿‡æ»¤ â†’ æ˜ å°„ â†’ æ’åº

// ===== å·¥å‚æ¨¡å¼æ€ç»´ =====
const createProcessor = (filterFn, mapFn, sortFn) => {
    return (data) => {
        return data.filter(filterFn).map(mapFn).sort(sortFn);
    };
};
// é—®é¢˜ï¼šfilterFn, mapFn, sortFn å¿…é¡»åŒæ—¶ä¼ å…¥
// æ— æ³•çµæ´»ç»„åˆ

// ===== æŸ¯é‡ŒåŒ–æ€ç»´ =====
const filter = fn => arr => arr.filter(fn);
const map = fn => arr => arr.map(fn);
const sort = fn => arr => [...arr].sort(fn);

const pipe = (...fns) => x => fns.reduce((v, f) => f(v), x);

// å¯ä»¥ä»»æ„ç»„åˆ
const process1 = pipe(filter(x => x > 0), map(x => x * 2));
const process2 = pipe(map(x => x * 2), sort((a, b) => a - b));
const process3 = pipe(filter(x => x > 0), sort((a, b) => b - a));

// çµæ´»åº¦å®Œå…¨ä¸åŒ
```

---

## æ€»ç»“

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                         â”‚
â”‚  å·¥å‚æ¨¡å¼ï¼š                                              â”‚
â”‚  "ç»™æˆ‘é…ç½®ï¼Œæˆ‘ç»™ä½ äº§å“"                                   â”‚
â”‚  â†’ å…³æ³¨åˆ›å»º                                             â”‚
â”‚                                                         â”‚
â”‚  æŸ¯é‡ŒåŒ–ï¼š                                                â”‚
â”‚  "ç»™æˆ‘å‚æ•°ï¼Œæˆ‘ç»™ä½ æ–°å‡½æ•°ï¼Œç»§ç»­ç»™å‚æ•°ï¼Œç»§ç»­ç»™æ–°å‡½æ•°..."      â”‚
â”‚  â†’ å…³æ³¨å˜æ¢å’Œç»„åˆ                                        â”‚
â”‚                                                         â”‚
â”‚  ä¸å¯æ›¿ä»£ä¹‹å¤„ï¼š                                          â”‚
â”‚  â†’ å‡½æ•°ç»„åˆçš„æ ‡å‡†æ¥å£                                    â”‚
â”‚  â†’ Point-free ç¼–ç¨‹                                      â”‚
â”‚  â†’ ä¸å‡½æ•°å¼å·¥å…·åº“é…åˆ                                    â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

æƒ³ç»§ç»­æ·±å…¥ `pipe/compose` çš„å®ç°åŸç†å—ï¼Ÿæˆ–è€…çœ‹çœ‹ Ramda è¿™ç±»åº“æ˜¯æ€ä¹ˆç”¨æŸ¯é‡ŒåŒ–çš„ï¼Ÿ






# ç¼“å­˜/è®°å¿†åŒ–
```js
function memoize(fn) {
    const cache = {};  // é—­åŒ…ä¿å­˜ç¼“å­˜
    
    return function(n) {
        if (cache[n] !== undefined) {
            console.log('ä»ç¼“å­˜å–');
            return cache[n];
        }
        console.log('è®¡ç®—ä¸­...');
        cache[n] = fn(n);
        return cache[n];
    };
}

const factorial = memoize(function(n) {
    return n <= 1 ? 1 : n * factorial(n - 1);
});

factorial(5);  // è®¡ç®—ä¸­... â†’ 120
factorial(5);  // ä»ç¼“å­˜å– â†’ 120

```

---



å¥½é—®é¢˜ï¼é—­åŒ…ç¡®å®æœ‰**ä¸å¯æ›¿ä»£**çš„åœºæ™¯ ğŸ‘‡

---

## 1ï¸âƒ£ ç§æœ‰å˜é‡ï¼ˆæœ€ç»å…¸ï¼‰

```javascript
function createWallet() {
    let money = 100;  // å¤–éƒ¨æ— æ³•ç›´æ¥è®¿é—®
  
    return {
        spend: function(amount) {
            if (amount <= money) {
                money -= amount;
                return true;
            }
            return false;
        },
        check: function() {
            return money;
        }
    };
}

const wallet = createWallet();
wallet.check();     // 100
wallet.spend(30);   // true
wallet.check();     // 70
wallet.money;       // undefined â† è®¿é—®ä¸åˆ°ï¼
```

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  createWallet ä½œç”¨åŸŸ         â”‚
â”‚                             â”‚
â”‚   money = 70  ğŸ”’ ç§æœ‰çš„      â”‚
â”‚       â†‘                     â”‚
â”‚   â”Œâ”€â”€â”€â”´â”€â”€â”€â”                 â”‚
â”‚   â”‚ spend â”‚ â† èƒ½è®¿é—® money   â”‚
â”‚   â”‚ check â”‚ â† èƒ½è®¿é—® money   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“ è¿”å›
    å¤–éƒ¨åªèƒ½ç”¨ spend/check
    ä¸èƒ½ç›´æ¥æ”¹ money
```

**let æ›¿ä»£ä¸äº†**ï¼šlet åªæ˜¯å—ä½œç”¨åŸŸï¼Œæ— æ³•å®ç°"ç§æœ‰"

---

## 2ï¸âƒ£ å‡½æ•°å·¥å‚

```javascript
function createMultiplier(x) {
    return function(y) {
        return x * y;
    };
}

const double = createMultiplier(2);
const triple = createMultiplier(3);

double(10);  // 20
triple(10);  // 30
```

```
double è®°ä½äº† x=2
triple è®°ä½äº† x=3
        â†“
å„è‡ªç‹¬ç«‹ï¼Œäº’ä¸å½±å“
```

---

## 3ï¸âƒ£ å‡½æ•°æŸ¯é‡ŒåŒ–

```javascript
// æ™®é€šå†™æ³•
function add(a, b, c) {
    return a + b + c;
}
add(1, 2, 3);  // 6

// æŸ¯é‡ŒåŒ–ï¼ˆé—­åŒ…å®ç°ï¼‰
function curriedAdd(a) {
    return function(b) {
        return function(c) {
            return a + b + c;  // è®°ä½äº† a å’Œ b
        };
    };
}
curriedAdd(1)(2)(3);  // 6

// å®ç”¨åœºæ™¯
const addTax = curriedAdd(0.1);  // å›ºå®šç¨ç‡ 10%
const addShipping = addTax(5);    // å›ºå®šè¿è´¹ 5
addShipping(100);  // 0.1 + 5 + 100 = 105.1
```

---

## 4ï¸âƒ£ é˜²æŠ–/èŠ‚æµï¼ˆå®é™…å¼€å‘å¸¸ç”¨ï¼‰

```javascript
function debounce(fn, delay) {
    let timer = null;  // é—­åŒ…ä¿å­˜ timer
  
    return function(...args) {
        clearTimeout(timer);
        timer = setTimeout(() => {
            fn.apply(this, args);
        }, delay);
    };
}

// ä½¿ç”¨
const search = debounce(function(keyword) {
    console.log('æœç´¢:', keyword);
}, 500);

// å¿«é€Ÿè¾“å…¥ï¼Œåªæ‰§è¡Œæœ€åä¸€æ¬¡
search('a');
search('ab');
search('abc');  // åªæœ‰è¿™ä¸ªä¼šæ‰§è¡Œ
```

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  debounce ä½œç”¨åŸŸ          â”‚
â”‚                          â”‚
â”‚   timer = ... ğŸ”’         â”‚
â”‚      â†‘                   â”‚
â”‚   è¿”å›çš„å‡½æ•°èƒ½è®¿é—® timer   â”‚
â”‚   æ¯æ¬¡è°ƒç”¨å…±äº«åŒä¸€ä¸ª timer â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5ï¸âƒ£ ç¼“å­˜/è®°å¿†åŒ–

```javascript
function memoize(fn) {
    const cache = {};  // é—­åŒ…ä¿å­˜ç¼“å­˜
  
    return function(n) {
        if (cache[n] !== undefined) {
            console.log('ä»ç¼“å­˜å–');
            return cache[n];
        }
        console.log('è®¡ç®—ä¸­...');
        cache[n] = fn(n);
        return cache[n];
    };
}

const factorial = memoize(function(n) {
    return n <= 1 ? 1 : n * factorial(n - 1);
});

factorial(5);  // è®¡ç®—ä¸­... â†’ 120
factorial(5);  // ä»ç¼“å­˜å– â†’ 120
```

---

## 6ï¸âƒ£ æ¨¡å—æ¨¡å¼ï¼ˆES6 Module ä¹‹å‰çš„æ–¹æ¡ˆï¼‰

```javascript
const Calculator = (function() {
    // ç§æœ‰
    let result = 0;
  
    function validate(n) {
        return typeof n === 'number';
    }
  
    // å…¬å¼€
    return {
        add: function(n) {
            if (validate(n)) result += n;
            return this;
        },
        getResult: function() {
            return result;
        }
    };
})();

Calculator.add(5).add(3).getResult();  // 8
Calculator.result;    // undefined
Calculator.validate;  // undefined
```

---

## æ€»ç»“ï¼šé—­åŒ…ä¸å¯æ›¿ä»£çš„åœºæ™¯

| åœºæ™¯ | æ ¸å¿ƒèƒ½åŠ› | let èƒ½æ›¿ä»£ï¼Ÿ |
|------|---------|-------------|
| ç§æœ‰å˜é‡ | éšè—æ•°æ® | âŒ |
| å‡½æ•°å·¥å‚ | è®°ä½å‚æ•° | âŒ |
| æŸ¯é‡ŒåŒ– | åˆ†æ­¥ä¼ å‚ | âŒ |
| é˜²æŠ–èŠ‚æµ | è·¨è°ƒç”¨ä¿æŒçŠ¶æ€ | âŒ |
| ç¼“å­˜ | æŒä¹…åŒ–å­˜å‚¨ | âŒ |
| æ¨¡å—æ¨¡å¼ | å°è£… | âŒï¼ˆä½†æœ‰ ES6 Moduleï¼‰ |

---

## ä¸€å¥è¯

> **let è§£å†³çš„æ˜¯ä½œç”¨åŸŸé—®é¢˜**
> **é—­åŒ…è§£å†³çš„æ˜¯"å‡½æ•°è®°ä½å¤–éƒ¨å˜é‡"çš„é—®é¢˜**

ä¸¤è€…è§£å†³çš„æ˜¯**ä¸åŒå±‚é¢**çš„é—®é¢˜ï¼

é—­åŒ… = **å‡½æ•° + å®ƒèƒ½è®¿é—®çš„å¤–éƒ¨å˜é‡** = æœ‰è®°å¿†çš„å‡½æ•° ğŸ§ 






