

## ä¸ºä»€ä¹ˆè¦ç”¨ç®­å¤´å‡½æ•°

å›è°ƒå‡½æ•°é‡Œ thisä¸¢å¤±


### æ¡ˆä¾‹1
```js
var obj = {
  name: 'å¼ ä¸‰',
  
  sayLater: function() {
    // è¿™é‡Œçš„ this æ˜¯ obj âœ…
    console.log(this.name);  // 'å¼ ä¸‰'
    
    setTimeout(function() {
      // è¿™ä¸ªå‡½æ•°æ˜¯è°è°ƒç”¨çš„ï¼Ÿæ˜¯ setTimeout å†…éƒ¨è°ƒç”¨çš„ï¼
      // ä¸æ˜¯ obj è°ƒç”¨çš„ï¼
      console.log(this.name);  // undefined âŒ
    }, 1000);
  }
};

obj.sayLater();  // obj è°ƒç”¨äº† sayLater


```

è§£å†³æ–¹æ¡ˆ

```js
var obj = {
  name: 'å¼ ä¸‰',
  
  sayLater: function() {
    // âœ… ç®­å¤´å‡½æ•°ï¼šç»§æ‰¿å¤–å±‚çš„ this
    setTimeout(() => {
      console.log(this.name);  // "å¼ ä¸‰"ï¼ˆthis = objï¼‰
    }, 1000);
  }
};

obj.sayLater();  // "å¼ ä¸‰"

```

æ‹†è§£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  sayLater: function() {     â† å¤–å±‚å‡½æ•°          â”‚
â”‚    setTimeout(() => {       â† ç®­å¤´å‡½æ•°          â”‚
â”‚      console.log(this.name);                    â”‚
â”‚    }, 1000);                                    â”‚
â”‚  }                                              â”‚
â”‚                                                 â”‚
â”‚  ç®­å¤´å‡½æ•°çš„ this = sayLater çš„ this = obj       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                 â”‚
â”‚  ç®­å¤´å‡½æ•°çš„ this è§„åˆ™ï¼š                          â”‚
â”‚                                                 â”‚
â”‚  1. æ²¡æœ‰è‡ªå·±çš„ this                             â”‚
â”‚  2. ç»§æ‰¿å®šä¹‰æ—¶å¤–å±‚å‡½æ•°çš„ this                    â”‚
â”‚  3. ä¸€æ—¦ç¡®å®šï¼Œæ°¸è¿œä¸å˜ï¼ˆcall/apply/bindæ— æ•ˆï¼‰    â”‚
â”‚                                                 â”‚
â”‚  è®°å¿†å£è¯€ï¼š                                      â”‚
â”‚  æ™®é€šå‡½æ•° â†’ çœ‹è°ƒç”¨                              â”‚
â”‚  ç®­å¤´å‡½æ•° â†’ çœ‹å®šä¹‰                              â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜



setTimeout æ˜¯åµŒå¥—è°ƒç”¨çš„ thisæŒ‡å‘æ˜¯undefined æ‰€æœ‰æ¨èç”¨this



```


### æ¡ˆä¾‹2


```js
var name = 'å…¨å±€';

var obj = {
  name: 'å¼ ä¸‰',
  say2: function() {
    console.log(this.name);
  }
};

// æƒ…å†µ1ï¼šç›´æ¥è°ƒç”¨
obj.say2();   // 'å¼ ä¸‰'
// è§£è¯»ï¼šobj.say2() â†’ obj åœ¨è°ƒç”¨ â†’ this = obj

// æƒ…å†µ2ï¼šå…ˆå–å‡ºï¼Œå†è°ƒç”¨
var fn = obj.say2;  // åªæ˜¯æŠŠå‡½æ•°ã€å¤åˆ¶ã€‘ç»™ fnï¼Œæ²¡æœ‰è°ƒç”¨ï¼
fn();               // 'å…¨å±€'
// è§£è¯»ï¼šfn() â†’ æ²¡æœ‰äºº.fn() â†’ this = window


```

æ‹†è§£
```
obj.say2  â”€â”€â”€â”€â”€â”€â”
                â”œâ”€â”€â†’  function() { console.log(this.name); }
fn  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä¸¤ä¸ªå˜é‡æŒ‡å‘ã€åŒä¸€ä¸ªå‡½æ•°ã€‘
ä½†è°ƒç”¨æ–¹å¼ä¸åŒï¼Œthis å°±ä¸åŒï¼

```


è¯¯åŒºï¼š

obj.say2ä¸ obj.say2()å®Œå…¨ä¸ä¸€æ ·

obj.say2    // ğŸ‘ˆ è¿™æ˜¯ã€å–å‡ºã€‘å‡½æ•°ï¼Œä¸æ‰§è¡Œ
obj.say2()  // ğŸ‘ˆ è¿™æ˜¯ã€æ‰§è¡Œã€‘å‡½æ•°



### æ¡ˆä¾‹3


å¦‚æœæ”¹æˆ var fn = obj.say2() å‘¢ é‚£ä¹ˆ fnï¼ˆï¼‰çš„å€¼


var fn = obj.say2;    // fn æ˜¯ã€å‡½æ•°ã€‘
var fn = obj.say2();  // fn æ˜¯ã€å‡½æ•°çš„è¿”å›å€¼ã€‘


```js
var name = 'å…¨å±€';

var obj = {
  name: 'å¼ ä¸‰',
  say2: function() {
    console.log(this.name);
    // æ²¡æœ‰ returnï¼Œé»˜è®¤è¿”å› undefined
  }
};

var fn = obj.say2();  
// ç¬¬ä¸€æ­¥ï¼šæ‰§è¡Œ obj.say2()ï¼Œæ‰“å° 'å¼ ä¸‰'
// ç¬¬äºŒæ­¥ï¼šæŠŠè¿”å›å€¼èµ‹ç»™ fnï¼Œfn = undefined

console.log(fn);  // undefined
fn();             // âŒ æŠ¥é”™ï¼undefined ä¸æ˜¯å‡½æ•°

```


æ‹†è§£
```

var fn = obj.say2;
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä¸æ‰§è¡Œå‡½æ•°                  â”‚
â”‚  fn = é‚£ä¸ªå‡½æ•°æœ¬èº«           â”‚
â”‚  fn å¯ä»¥ä¹‹åè°ƒç”¨ fn()        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

var fn = obj.say2();
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç«‹åˆ»æ‰§è¡Œå‡½æ•°ï¼ˆæ‰“å°'å¼ ä¸‰'ï¼‰    â”‚
â”‚  fn = è¿”å›å€¼ (undefined)     â”‚
â”‚  fn() ä¼šæŠ¥é”™                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

```


### æ¡ˆä¾‹4ï¼š

å¦‚æœå‡½æ•°æœ‰è¿”å›å€¼å‘¢

```js
var obj = {
  name: 'å¼ ä¸‰',
  getName: function() {
    console.log(this.name);
    return this.name;  // æœ‰è¿”å›å€¼
  }
};

var fn = obj.getName();  
// æ‰§è¡Œå‡½æ•°ï¼Œæ‰“å° 'å¼ ä¸‰'
// fn = 'å¼ ä¸‰'ï¼ˆè¿”å›å€¼ï¼‰

console.log(fn);  // 'å¼ ä¸‰'
fn();             // âŒ æŠ¥é”™ï¼'å¼ ä¸‰' æ˜¯å­—ç¬¦ä¸²ï¼Œä¸æ˜¯å‡½æ•°

```

æ‹†è§£

|å†™æ³•|å«ä¹‰|fn çš„å€¼|
|---|---|---|
|`var fn = obj.say2`|å–å‡ºå‡½æ•°ï¼Œä¸æ‰§è¡Œ|å‡½æ•°æœ¬èº«|
|`var fn = obj.say2()`|æ‰§è¡Œå‡½æ•°ï¼Œå–è¿”å›å€¼|undefinedï¼ˆæˆ–å…¶ä»–è¿”å›å€¼ï¼‰|

ï¼ˆï¼‰å°±æ˜¯æ‰§è¡Œçš„æ„æ€


