# æ·±æ‹·è´ä¸æµ…æ‹·è´ - ç¬¬ä¸€æ€§åŸç†æ·±åº¦æ‹†è§£

> é¢è¯•é«˜é¢‘æŒ‡æ•°ï¼šâ­â­â­â­â­
> 
> æœ¬ç« è®²è§£æµ…æ‹·è´å’Œæ·±æ‹·è´çš„ä¸åŒå®ç°æ–¹æ³•

---

## ğŸ“‹ ç›®å½•

1. [ç¬¬ä¸€æ€§åŸç†ï¼šä¸ºä»€ä¹ˆéœ€è¦æ‹·è´ï¼Ÿ](#ä¸€ç¬¬ä¸€æ€§åŸç†ä¸ºä»€ä¹ˆéœ€è¦æ‹·è´)
2. [æ•°æ®ç±»å‹ä¸å†…å­˜æ¨¡å‹](#äºŒæ•°æ®ç±»å‹ä¸å†…å­˜æ¨¡å‹)
3. [èµ‹å€¼ã€æµ…æ‹·è´ã€æ·±æ‹·è´çš„æœ¬è´¨åŒºåˆ«](#ä¸‰èµ‹å€¼æµ…æ‹·è´æ·±æ‹·è´çš„æœ¬è´¨åŒºåˆ«)
4. [æµ…æ‹·è´å®ç°æ–¹æ³•](#å››æµ…æ‹·è´å®ç°æ–¹æ³•)
5. [æ·±æ‹·è´å®ç°æ–¹æ³•ï¼ˆå››ç§é€’å½’æ–¹æ¡ˆï¼‰](#äº”æ·±æ‹·è´å®ç°æ–¹æ³•)
6. [JSON æ–¹æ³•çš„å‘](#å…­json-æ–¹æ³•çš„å‘)
7. [ç»å…¸é¢è¯•é¢˜](#ä¸ƒç»å…¸é¢è¯•é¢˜)

---

## ä¸€ã€ç¬¬ä¸€æ€§åŸç†ï¼šä¸ºä»€ä¹ˆéœ€è¦æ‹·è´ï¼Ÿ

### 1.1 æ ¹æœ¬é—®é¢˜

```
å½“æˆ‘ä»¬æŠŠä¸€ä¸ªå¯¹è±¡èµ‹å€¼ç»™å¦ä¸€ä¸ªå˜é‡æ—¶ï¼Œå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ

const obj1 = { name: 'Alice', age: 25 };
const obj2 = obj1;

obj2.name = 'Bob';
console.log(obj1.name);  // 'Bob' ğŸ˜± obj1 ä¹Ÿè¢«æ”¹äº†ï¼

æ ¹æœ¬åŸå› ï¼šobj2 å’Œ obj1 æŒ‡å‘ã€åŒä¸€å—å†…å­˜ã€‘
```

### 1.2 æ‹·è´çš„æœ¬è´¨éœ€æ±‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       æ‹·è´çš„æœ¬è´¨éœ€æ±‚                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   æˆ‘ä»¬å¸Œæœ›ï¼šä¿®æ”¹æ–°å¯¹è±¡æ—¶ï¼Œã€ä¸å½±å“ã€‘åŸå¯¹è±¡                        â”‚
â”‚                                                                 â”‚
â”‚   è¿™å°±éœ€è¦ï¼šåˆ›å»ºä¸€ä¸ªã€ç‹¬ç«‹çš„å‰¯æœ¬ã€‘                               â”‚
â”‚                                                                 â”‚
â”‚   é—®é¢˜æ¥äº†ï¼š                                                    â”‚
â”‚   â”œâ”€â”€ åªå¤åˆ¶ç¬¬ä¸€å±‚ï¼Ÿ â†’ æµ…æ‹·è´                                   â”‚
â”‚   â””â”€â”€ é€’å½’å¤åˆ¶æ‰€æœ‰å±‚ï¼Ÿ â†’ æ·±æ‹·è´                                 â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## äºŒã€æ•°æ®ç±»å‹ä¸å†…å­˜æ¨¡å‹

### 2.1 JavaScript æ•°æ®ç±»å‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    JavaScript æ•°æ®ç±»å‹                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆ7ç§ï¼‰                 å¼•ç”¨æ•°æ®ç±»å‹                â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                 â•â•â•â•â•â•â•â•â•â•â•â•â•â•             â”‚
â”‚   â€¢ String                           â€¢ Object                   â”‚
â”‚   â€¢ Number                           â€¢ Array                    â”‚
â”‚   â€¢ Boolean                          â€¢ Function                 â”‚
â”‚   â€¢ Null                             â€¢ Date                     â”‚
â”‚   â€¢ Undefined                        â€¢ RegExp                   â”‚
â”‚   â€¢ Symbol                           â€¢ Map / Set                â”‚
â”‚   â€¢ BigInt (ES11æ–°å¢)                â€¢ ...                      â”‚
â”‚                                                                 â”‚
â”‚   å­˜å‚¨ä½ç½®ï¼šæ ˆå†…å­˜                    å­˜å‚¨ä½ç½®ï¼šå †å†…å­˜            â”‚
â”‚   ç‰¹ç‚¹ï¼šå€¼ç›´æ¥å­˜å‚¨                    ç‰¹ç‚¹ï¼šæ ˆä¸­å­˜åœ°å€ï¼Œå †ä¸­å­˜å€¼  â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 å†…å­˜å­˜å‚¨æ¨¡å‹å›¾è§£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      å†…å­˜å­˜å‚¨æ¨¡å‹                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   åŸºæœ¬ç±»å‹ï¼š                                                    â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                    â”‚
â”‚   let a = 1;                                                    â”‚
â”‚   let b = a;    // å¤åˆ¶å€¼æœ¬èº«                                   â”‚
â”‚                                                                 â”‚
â”‚   æ ˆå†…å­˜                                                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”‚
â”‚   â”‚  a  â”‚   1   â”‚                                              â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                              â”‚
â”‚   â”‚  b  â”‚   1   â”‚  â† ç‹¬ç«‹çš„å‰¯æœ¬                                 â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                              â”‚
â”‚                                                                 â”‚
â”‚   b = 2 åï¼Œa ä»ç„¶æ˜¯ 1 âœ…                                       â”‚
â”‚                                                                 â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                                                                 â”‚
â”‚   å¼•ç”¨ç±»å‹ï¼š                                                    â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                    â”‚
â”‚   let obj1 = { name: 'Alice' };                                â”‚
â”‚   let obj2 = obj1;  // å¤åˆ¶åœ°å€ï¼                               â”‚
â”‚                                                                 â”‚
â”‚   æ ˆå†…å­˜                          å †å†…å­˜                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚   â”‚ obj1 â”‚ 0x001    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚ { name:'Alice' }â”‚           â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”Œâ”€â”€â”€> â”‚                 â”‚           â”‚
â”‚   â”‚ obj2 â”‚ 0x001    â”‚ â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                          â”‚
â”‚                                                                 â”‚
â”‚   obj2.name = 'Bob' åï¼Œobj1.name ä¹Ÿå˜æˆ 'Bob' âŒ               â”‚
â”‚   å› ä¸ºå®ƒä»¬æŒ‡å‘ã€åŒä¸€ä¸ªå¯¹è±¡ã€‘                                    â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä¸‰ã€èµ‹å€¼ã€æµ…æ‹·è´ã€æ·±æ‹·è´çš„æœ¬è´¨åŒºåˆ«

### 3.1 ä¸‰è€…å¯¹æ¯”å›¾è§£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              èµ‹å€¼ vs æµ…æ‹·è´ vs æ·±æ‹·è´                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   åŸå¯¹è±¡: { name: 'Alice', address: { city: 'NYC' } }           â”‚
â”‚                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                       èµ‹å€¼                               â”‚  â”‚
â”‚   â”‚   obj2 = obj1                                           â”‚  â”‚
â”‚   â”‚                                                         â”‚  â”‚
â”‚   â”‚   obj1 â”€â”€â”€â”€â”€â”€â”                                         â”‚  â”‚
â”‚   â”‚              â”œâ”€â”€> { name, address: â”€â”€> { city } }      â”‚  â”‚
â”‚   â”‚   obj2 â”€â”€â”€â”€â”€â”€â”˜                                         â”‚  â”‚
â”‚   â”‚                                                         â”‚  â”‚
â”‚   â”‚   å®Œå…¨å…±äº«ï¼Œæ”¹ä»»ä½•å±æ€§éƒ½äº’ç›¸å½±å“                         â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                       æµ…æ‹·è´                             â”‚  â”‚
â”‚   â”‚   obj2 = { ...obj1 }                                    â”‚  â”‚
â”‚   â”‚                                                         â”‚  â”‚
â”‚   â”‚   obj1 â”€â”€> { name, address: â”€â”                         â”‚  â”‚
â”‚   â”‚                              â”œâ”€â”€> { city }              â”‚  â”‚
â”‚   â”‚   obj2 â”€â”€> { name, address: â”€â”˜                         â”‚  â”‚
â”‚   â”‚                                                         â”‚  â”‚
â”‚   â”‚   ç¬¬ä¸€å±‚ç‹¬ç«‹ï¼ŒåµŒå¥—å¯¹è±¡ä»å…±äº«                             â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                       æ·±æ‹·è´                             â”‚  â”‚
â”‚   â”‚   obj2 = deepClone(obj1)                                â”‚  â”‚
â”‚   â”‚                                                         â”‚  â”‚
â”‚   â”‚   obj1 â”€â”€> { name, address: â”€â”€> { city } }              â”‚  â”‚
â”‚   â”‚                                                         â”‚  â”‚
â”‚   â”‚   obj2 â”€â”€> { name, address: â”€â”€> { city } }              â”‚  â”‚
â”‚   â”‚                                                         â”‚  â”‚
â”‚   â”‚   å®Œå…¨ç‹¬ç«‹ï¼Œäº’ä¸å½±å“                                     â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 ä»£ç éªŒè¯

```javascript
const obj1 = { 
  name: 'Alice', 
  age: 25, 
  address: { city: 'New York' } 
};

// èµ‹å€¼
const obj2 = obj1;
obj2.age = 30;
obj2.address.city = 'Los Angeles';
console.log(obj1.age);           // 30 âŒ è¢«å½±å“
console.log(obj1.address.city);  // 'Los Angeles' âŒ è¢«å½±å“

// æµ…æ‹·è´
const obj3 = { ...obj1 };
obj3.age = 35;
obj3.address.city = 'Chicago';
console.log(obj1.age);           // 30 âœ… ä¸å—å½±å“ï¼ˆç¬¬ä¸€å±‚ç‹¬ç«‹ï¼‰
console.log(obj1.address.city);  // 'Chicago' âŒ è¢«å½±å“ï¼ˆåµŒå¥—å…±äº«ï¼‰

// æ·±æ‹·è´
const obj4 = JSON.parse(JSON.stringify(obj1));
obj4.age = 40;
obj4.address.city = 'Seattle';
console.log(obj1.age);           // 30 âœ… ä¸å—å½±å“
console.log(obj1.address.city);  // 'Chicago' âœ… ä¸å—å½±å“
```

---

## å››ã€æµ…æ‹·è´å®ç°æ–¹æ³•

### 4.1 æµ…æ‹·è´çš„å®šä¹‰

> æµ…æ‹·è´æ˜¯æŒ‰ä½æ‹·è´å¯¹è±¡ï¼Œå®ƒä¼šåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æœ‰ç€åŸå§‹å¯¹è±¡å±æ€§å€¼çš„ç²¾ç¡®æ‹·è´ã€‚å¦‚æœå±æ€§æ˜¯åŸºæœ¬ç±»å‹ï¼Œæ‹·è´çš„å°±æ˜¯å€¼ï¼›å¦‚æœå±æ€§æ˜¯å¼•ç”¨ç±»å‹ï¼Œæ‹·è´çš„æ˜¯å†…å­˜åœ°å€ã€‚

### 4.2 ä¸‰ç§å®ç°æ–¹å¼

```javascript
// æ–¹æ³•1: éå† key/value èµ‹å€¼
function shallowCopy1(obj) {
  if (typeof obj !== 'object' || obj === null) return obj;
  
  const result = Array.isArray(obj) ? [] : {};
  for (let key in obj) {
    if (obj.hasOwnProperty(key)) {
      result[key] = obj[key];
    }
  }
  return result;
}

// æ–¹æ³•2: Object.assign()
function shallowCopy2(obj) {
  return Object.assign({}, obj);
}

// æ–¹æ³•3: å±•å¼€è¿ç®—ç¬¦ ...
function shallowCopy3(obj) {
  return { ...obj };
}

// æ•°ç»„çš„æµ…æ‹·è´æ–¹æ³•
const arr = [1, 2, { a: 3 }];
const arr1 = arr.slice();        // slice()
const arr2 = arr.concat();       // concat()
const arr3 = [...arr];           // å±•å¼€è¿ç®—ç¬¦
const arr4 = Array.from(arr);    // Array.from()
```

### 4.3 æµ…æ‹·è´æ•ˆæœéªŒè¯

```javascript
const obj1 = {
  name: 'å¼ ä¸‰',
  age: 8,
  pal: ['ç‹äº”', 'ç‹å…­', 'ç‹ä¸ƒ']
};

const obj3 = shallowCopy1(obj1);

obj3.name = 'æå››';
obj3.pal[0] = 'ç‹éº»å­';

console.log("obj1", obj1);
// { age: 8, name: 'å¼ ä¸‰', pal: ['ç‹éº»å­', 'ç‹å…­', 'ç‹ä¸ƒ'] }
//                             â†‘ åµŒå¥—æ•°ç»„è¢«å½±å“äº†ï¼

console.log("obj3", obj3);
// { age: 8, name: 'æå››', pal: ['ç‹éº»å­', 'ç‹å…­', 'ç‹ä¸ƒ'] }
```

---

## äº”ã€æ·±æ‹·è´å®ç°æ–¹æ³•

### 5.1 æ–¹æ³•ä¸€ï¼šåŸºç¡€é€’å½’å®ç°

**æ ¸å¿ƒæ€è·¯ï¼šéå†å¯¹è±¡ï¼Œé‡åˆ°å¼•ç”¨ç±»å‹å°±é€’å½’å¤åˆ¶**

```javascript
function deepCopy(obj) {
  // 1. å¤„ç† null å’ŒåŸºæœ¬ç±»å‹
  if (obj === null || typeof obj !== 'object') {
    return obj;
  }
  
  // 2. å¤„ç†æ•°ç»„å’Œå¯¹è±¡
  let newObj = Array.isArray(obj) ? [] : {};
  
  for (let key in obj) {
    if (obj.hasOwnProperty(key)) {
      // é€’å½’è°ƒç”¨
      newObj[key] = deepCopy(obj[key]);
    }
  }
  
  return newObj;
}
```

**é€’å½’è¿‡ç¨‹å›¾è§£ï¼š**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    é€’å½’æ·±æ‹·è´è¿‡ç¨‹                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   åŸå¯¹è±¡: { name: 'test', main: { a: 1, b: 2 }, arr: [1, 2] }  â”‚
â”‚                                                                 â”‚
â”‚   deepCopy(obj)                                                â”‚
â”‚       â”‚                                                        â”‚
â”‚       â”œâ”€â”€ name: 'test' â†’ åŸºæœ¬ç±»å‹ï¼Œç›´æ¥è¿”å›                    â”‚
â”‚       â”‚                                                        â”‚
â”‚       â”œâ”€â”€ main: { a: 1, b: 2 } â†’ å¯¹è±¡ï¼Œé€’å½’è°ƒç”¨                â”‚
â”‚       â”‚       â”‚                                                â”‚
â”‚       â”‚       â”œâ”€â”€ a: 1 â†’ åŸºæœ¬ç±»å‹ï¼Œç›´æ¥è¿”å›                    â”‚
â”‚       â”‚       â””â”€â”€ b: 2 â†’ åŸºæœ¬ç±»å‹ï¼Œç›´æ¥è¿”å›                    â”‚
â”‚       â”‚                                                        â”‚
â”‚       â””â”€â”€ arr: [1, 2] â†’ æ•°ç»„ï¼Œé€’å½’è°ƒç”¨                         â”‚
â”‚               â”‚                                                â”‚
â”‚               â”œâ”€â”€ [0]: 1 â†’ åŸºæœ¬ç±»å‹ï¼Œç›´æ¥è¿”å›                  â”‚
â”‚               â””â”€â”€ [1]: 2 â†’ åŸºæœ¬ç±»å‹ï¼Œç›´æ¥è¿”å›                  â”‚
â”‚                                                                 â”‚
â”‚   æœ€ç»ˆè¿”å›å®Œå…¨ç‹¬ç«‹çš„æ–°å¯¹è±¡                                      â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 æ–¹æ³•äºŒï¼šå¤„ç†æ›´å¤šç±»å‹

```javascript
function deepCopy(target) {
  // åŸºæœ¬ç±»å‹ç›´æ¥è¿”å›
  if (target === null || typeof target !== 'object') {
    return target;
  }
  
  // å¤„ç† Date
  if (target instanceof Date) {
    return new Date(target.getTime());
  }
  
  // å¤„ç† RegExp
  if (target instanceof RegExp) {
    return new RegExp(target);
  }
  
  // å¤„ç†æ•°ç»„
  if (Array.isArray(target)) {
    return target.map(item => deepCopy(item));
  }
  
  // å¤„ç†æ™®é€šå¯¹è±¡
  const newTarget = Object.create(null);  // åˆ›å»ºçº¯å‡€å¯¹è±¡
  for (const key in target) {
    if (target.hasOwnProperty(key)) {
      newTarget[key] = deepCopy(target[key]);
    }
  }
  return newTarget;
}
```

### 5.3 æ–¹æ³•ä¸‰ï¼šä½¿ç”¨ Map è§£å†³å¾ªç¯å¼•ç”¨ â­

**é—®é¢˜ï¼šå¦‚æœå¯¹è±¡è‡ªå·±å¼•ç”¨è‡ªå·±æ€ä¹ˆåŠï¼Ÿ**

```javascript
const obj = { name: 'test' };
obj.self = obj;  // å¾ªç¯å¼•ç”¨

deepCopy(obj);  // âŒ ä¼šæ— é™é€’å½’ï¼Œæ ˆæº¢å‡ºï¼
```

**è§£å†³æ–¹æ¡ˆï¼šç”¨ Map è®°å½•å·²æ‹·è´çš„å¯¹è±¡**

```javascript
function deepCopy(target, hash = new Map()) {
  // åŸºæœ¬ç±»å‹ç›´æ¥è¿”å›
  if (target === null || typeof target !== 'object') {
    return target;
  }
  
  // ğŸ”‘ å…³é”®ï¼šæ£€æŸ¥æ˜¯å¦å·²ç»æ‹·è´è¿‡
  if (hash.has(target)) {
    return hash.get(target);  // ç›´æ¥è¿”å›ä¹‹å‰çš„æ‹·è´
  }
  
  // å¤„ç† Date
  if (target instanceof Date) {
    return new Date(target.getTime());
  }
  
  // å¤„ç† RegExp
  if (target instanceof RegExp) {
    return new RegExp(target);
  }
  
  // åˆ›å»ºæ–°å¯¹è±¡/æ•°ç»„
  const newTarget = Array.isArray(target) ? [] : Object.create(null);
  
  // ğŸ”‘ å…³é”®ï¼šå­˜å…¥ Mapï¼Œå»ºç«‹æ˜ å°„å…³ç³»
  hash.set(target, newTarget);
  
  // é€’å½’æ‹·è´å±æ€§
  for (const key in target) {
    if (target.hasOwnProperty(key)) {
      newTarget[key] = deepCopy(target[key], hash);  // ä¼ é€’ hash
    }
  }
  
  return newTarget;
}
```

**å¾ªç¯å¼•ç”¨å¤„ç†å›¾è§£ï¼š**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Map è§£å†³å¾ªç¯å¼•ç”¨                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   const obj = { name: 'test' };                                â”‚
â”‚   obj.self = obj;                                              â”‚
â”‚                                                                 â”‚
â”‚   deepCopy(obj, hash)                                          â”‚
â”‚       â”‚                                                        â”‚
â”‚       â”œâ”€â”€ hash.has(obj)? â†’ No                                  â”‚
â”‚       â”œâ”€â”€ åˆ›å»º newObj = {}                                     â”‚
â”‚       â”œâ”€â”€ hash.set(obj, newObj)  // è®°å½•æ˜ å°„                   â”‚
â”‚       â”‚                                                        â”‚
â”‚       â”œâ”€â”€ æ‹·è´ name: 'test'                                    â”‚
â”‚       â”‚                                                        â”‚
â”‚       â””â”€â”€ æ‹·è´ self: obj                                       â”‚
â”‚               â”‚                                                â”‚
â”‚               â””â”€â”€ deepCopy(obj, hash)                          â”‚
â”‚                       â”‚                                        â”‚
â”‚                       â””â”€â”€ hash.has(obj)? â†’ Yes! âœ…             â”‚
â”‚                           return hash.get(obj)                 â”‚
â”‚                           // è¿”å›ä¹‹å‰åˆ›å»ºçš„ newObj              â”‚
â”‚                           // é¿å…æ— é™é€’å½’ï¼                     â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.4 æ–¹æ³•å››ï¼šWeakMap ä¼˜åŒ–å†…å­˜ â­â­

```javascript
function deepCopy(target, hash = new WeakMap()) {
  // åŸºæœ¬ç±»å‹ç›´æ¥è¿”å›
  if (target === null || typeof target !== 'object') {
    return target;
  }
  
  // æ£€æŸ¥å¾ªç¯å¼•ç”¨
  if (hash.has(target)) {
    return hash.get(target);
  }
  
  // å¤„ç†ç‰¹æ®Šå¯¹è±¡
  if (target instanceof Date) {
    return new Date(target.getTime());
  }
  if (target instanceof RegExp) {
    return new RegExp(target);
  }
  
  // åˆ›å»ºæ–°å¯¹è±¡
  const newTarget = Array.isArray(target) ? [] : Object.create(null);
  hash.set(target, newTarget);
  
  // é€’å½’æ‹·è´
  for (const key in target) {
    if (target.hasOwnProperty(key)) {
      newTarget[key] = deepCopy(target[key], hash);
    }
  }
  
  return newTarget;
}
```

**ä¸ºä»€ä¹ˆç”¨ WeakMap è€Œä¸æ˜¯ Mapï¼Ÿ**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Map vs WeakMap                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   Map                              WeakMap                      â”‚
â”‚   â”€â”€â”€                              â”€â”€â”€â”€â”€â”€â”€                      â”‚
â”‚   é”®å¯ä»¥æ˜¯ä»»æ„ç±»å‹                  é”®åªèƒ½æ˜¯å¯¹è±¡                  â”‚
â”‚   å¼ºå¼•ç”¨ï¼Œä¸ä¼šè¢«åƒåœ¾å›æ”¶            å¼±å¼•ç”¨ï¼Œå¯ä»¥è¢«åƒåœ¾å›æ”¶        â”‚
â”‚   æœ‰ size å±æ€§                     æ²¡æœ‰ size å±æ€§               â”‚
â”‚   å¯ä»¥éå†                         ä¸å¯éå†                     â”‚
â”‚                                                                 â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                                                                 â”‚
â”‚   ä½¿ç”¨ WeakMap çš„å¥½å¤„ï¼š                                         â”‚
â”‚                                                                 â”‚
â”‚   å½“åŸå¯¹è±¡è¢«å›æ”¶æ—¶ï¼ŒWeakMap ä¸­çš„å¯¹åº”æ¡ç›®ä¹Ÿä¼šè¢«è‡ªåŠ¨å›æ”¶           â”‚
â”‚   æ›´é€‚åˆå¤§é‡æ•°æ®çš„æ·±æ‹·è´ï¼Œä¸ä¼šé€ æˆå†…å­˜æ³„æ¼                       â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.5 ç»ˆæç‰ˆï¼šå¤„ç†æ‰€æœ‰ç±»å‹ â­â­â­

```javascript
function deepClone(obj, hash = new WeakMap()) {
  // 1. åŸºæœ¬ç±»å‹å’Œ null ç›´æ¥è¿”å›
  if (obj === null || typeof obj !== 'object') {
    return obj;
  }
  
  // 2. å¤„ç†å¾ªç¯å¼•ç”¨
  if (hash.has(obj)) {
    return hash.get(obj);
  }
  
  // 3. å¤„ç† Date
  if (obj instanceof Date) {
    return new Date(obj.getTime());
  }
  
  // 4. å¤„ç† RegExp
  if (obj instanceof RegExp) {
    return new RegExp(obj);
  }
  
  // 5. å¤„ç† Map
  if (obj instanceof Map) {
    const result = new Map();
    hash.set(obj, result);
    obj.forEach((value, key) => {
      result.set(deepClone(key, hash), deepClone(value, hash));
    });
    return result;
  }
  
  // 6. å¤„ç† Set
  if (obj instanceof Set) {
    const result = new Set();
    hash.set(obj, result);
    obj.forEach(value => {
      result.add(deepClone(value, hash));
    });
    return result;
  }
  
  // 7. å¤„ç†æ•°ç»„
  if (Array.isArray(obj)) {
    const result = [];
    hash.set(obj, result);
    obj.forEach((item, index) => {
      result[index] = deepClone(item, hash);
    });
    return result;
  }
  
  // 8. å¤„ç†æ™®é€šå¯¹è±¡
  const result = Object.create(Object.getPrototypeOf(obj));
  hash.set(obj, result);
  
  for (const key in obj) {
    if (obj.hasOwnProperty(key)) {
      result[key] = deepClone(obj[key], hash);
    }
  }
  
  // 9. å¤„ç† Symbol é”®
  const symbolKeys = Object.getOwnPropertySymbols(obj);
  for (const symKey of symbolKeys) {
    result[symKey] = deepClone(obj[symKey], hash);
  }
  
  return result;
}
```

---

## å…­ã€JSON æ–¹æ³•çš„å‘

### 6.1 JSON.parse(JSON.stringify()) çš„å±€é™æ€§

```javascript
// ç®€å•åœºæ™¯å¯ä»¥ç”¨
const obj = { a: 1, b: { c: 2 } };
const copy = JSON.parse(JSON.stringify(obj));  // âœ… å¯ä»¥
```

### 6.2 ä¸ƒå¤§ç¼ºé™·

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              JSON.parse(JSON.stringify()) çš„å‘                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   1. å‡½æ•°ä¸¢å¤±                                                   â”‚
â”‚      { fn: () => {} }  â†’  {}                                   â”‚
â”‚                                                                 â”‚
â”‚   2. undefined ä¸¢å¤±                                             â”‚
â”‚      { a: undefined }  â†’  {}                                   â”‚
â”‚                                                                 â”‚
â”‚   3. Symbol ä¸¢å¤±                                                â”‚
â”‚      { [Symbol()]: 1 }  â†’  {}                                  â”‚
â”‚                                                                 â”‚
â”‚   4. Date å˜æˆå­—ç¬¦ä¸²                                            â”‚
â”‚      { d: new Date() }  â†’  { d: "2024-01-01T00:00:00.000Z" }   â”‚
â”‚                                                                 â”‚
â”‚   5. RegExp å˜æˆç©ºå¯¹è±¡                                          â”‚
â”‚      { r: /abc/ }  â†’  { r: {} }                                â”‚
â”‚                                                                 â”‚
â”‚   6. NaN/Infinity å˜æˆ null                                    â”‚
â”‚      { n: NaN, i: Infinity }  â†’  { n: null, i: null }          â”‚
â”‚                                                                 â”‚
â”‚   7. ä¸æ”¯æŒå¾ªç¯å¼•ç”¨                                             â”‚
â”‚      obj.self = obj  â†’  âŒ TypeError                           â”‚
â”‚                                                                 â”‚
â”‚   8. Map/Set å˜æˆç©ºå¯¹è±¡                                         â”‚
â”‚      { m: new Map() }  â†’  { m: {} }                            â”‚
â”‚                                                                 â”‚
â”‚   9. åŸå‹é“¾ä¸¢å¤±                                                 â”‚
â”‚      new Person()  â†’  æ™®é€šå¯¹è±¡ {}                              â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.3 ä»£ç éªŒè¯

```javascript
const original = {
  fn: () => console.log('hello'),
  undef: undefined,
  sym: Symbol('test'),
  date: new Date(),
  reg: /abc/g,
  nan: NaN,
  infinity: Infinity,
  map: new Map([['a', 1]]),
  set: new Set([1, 2, 3])
};

const copy = JSON.parse(JSON.stringify(original));

console.log(copy);
// {
//   date: "2024-01-01T00:00:00.000Z",  // Date å˜å­—ç¬¦ä¸²
//   reg: {},                            // RegExp å˜ç©ºå¯¹è±¡
//   nan: null,                          // NaN å˜ null
//   infinity: null,                     // Infinity å˜ null
//   map: {},                            // Map å˜ç©ºå¯¹è±¡
//   set: {}                             // Set å˜ç©ºå¯¹è±¡
// }
// fn, undef, sym å…¨éƒ¨ä¸¢å¤±ï¼
```

---

## ä¸ƒã€ç»å…¸é¢è¯•é¢˜

### 7.1 é¢è¯•é¢˜1ï¼šå®ç°æµ…æ‹·è´

```javascript
// æ‰‹å†™æµ…æ‹·è´
function shallowClone(obj) {
  if (typeof obj !== 'object' || obj === null) {
    return obj;
  }
  
  const result = Array.isArray(obj) ? [] : {};
  
  for (let key in obj) {
    if (obj.hasOwnProperty(key)) {
      result[key] = obj[key];
    }
  }
  
  return result;
}
```

### 7.2 é¢è¯•é¢˜2ï¼šå®ç°æ·±æ‹·è´ï¼ˆå¤„ç†å¾ªç¯å¼•ç”¨ï¼‰

```javascript
// æ‰‹å†™æ·±æ‹·è´ï¼ˆå¿…èƒŒç‰ˆæœ¬ï¼‰
function deepClone(obj, hash = new WeakMap()) {
  if (obj === null || typeof obj !== 'object') return obj;
  if (hash.has(obj)) return hash.get(obj);
  
  if (obj instanceof Date) return new Date(obj);
  if (obj instanceof RegExp) return new RegExp(obj);
  
  const result = Array.isArray(obj) ? [] : {};
  hash.set(obj, result);
  
  for (let key in obj) {
    if (obj.hasOwnProperty(key)) {
      result[key] = deepClone(obj[key], hash);
    }
  }
  
  return result;
}
```

### 7.3 é¢è¯•é¢˜3ï¼šåˆ¤æ–­è¾“å‡º

```javascript
const obj1 = { a: 1, b: { c: 2 } };
const obj2 = { ...obj1 };

obj2.a = 10;
obj2.b.c = 20;

console.log(obj1.a);    // ?
console.log(obj1.b.c);  // ?

// ç­”æ¡ˆï¼š
// obj1.a = 1   (åŸºæœ¬ç±»å‹ï¼Œç‹¬ç«‹)
// obj1.b.c = 20 (å¼•ç”¨ç±»å‹ï¼Œå…±äº«)
```

### 7.4 é¢è¯•é¢˜4ï¼šå¦‚ä½•é€‰æ‹©æ‹·è´æ–¹å¼ï¼Ÿ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å¦‚ä½•é€‰æ‹©æ‹·è´æ–¹å¼ï¼Ÿ                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   åœºæ™¯                              æ¨èæ–¹æ¡ˆ                    â”‚
â”‚   â”€â”€â”€â”€                              â”€â”€â”€â”€â”€â”€â”€â”€                    â”‚
â”‚   ç®€å•å¯¹è±¡ï¼Œæ— åµŒå¥—                   æµ…æ‹·è´ { ...obj }           â”‚
â”‚   ç®€å•å¯¹è±¡ï¼Œæœ‰åµŒå¥—ï¼Œæ— ç‰¹æ®Šç±»å‹       JSON.parse(JSON.stringify) â”‚
â”‚   å¤æ‚å¯¹è±¡ï¼Œæœ‰å‡½æ•°/Date/å¾ªç¯å¼•ç”¨     æ‰‹å†™é€’å½’ æˆ– lodash.cloneDeepâ”‚
â”‚   çŠ¶æ€ç®¡ç†ï¼ˆVue/Reactï¼‰              immer åº“                   â”‚
â”‚                                                                 â”‚
â”‚   å·¥ä½œä¸­æ¨èï¼šlodash çš„ _.cloneDeep()                          â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š æ€»ç»“å¯¹æ¯”è¡¨

| ç‰¹æ€§ | èµ‹å€¼ | æµ…æ‹·è´ | æ·±æ‹·è´ |
|------|------|--------|--------|
| æ˜¯å¦æ–°å¯¹è±¡ | âŒ åŒä¸€ä¸ª | âœ… æ–°å¯¹è±¡ | âœ… æ–°å¯¹è±¡ |
| ç¬¬ä¸€å±‚ç‹¬ç«‹ | âŒ | âœ… | âœ… |
| åµŒå¥—å±‚ç‹¬ç«‹ | âŒ | âŒ | âœ… |
| æ€§èƒ½ | æœ€å¿« | å¿« | æ…¢ |
| å®ç°å¤æ‚åº¦ | - | ç®€å• | å¤æ‚ |

---

## ğŸ¯ æ ¸å¿ƒå¥¥ä¹‰ï¼ˆä¸€å¥è¯æ€»ç»“ï¼‰

> **æ·±æµ…æ‹·è´çš„æœ¬è´¨æ˜¯ã€Œå¤åˆ¶çš„æ˜¯å€¼è¿˜æ˜¯åœ°å€ã€â€”â€” åŸºæœ¬ç±»å‹å­˜å€¼åœ¨æ ˆä¸­æ‰€ä»¥å¤©ç„¶ç‹¬ç«‹ï¼Œå¼•ç”¨ç±»å‹å­˜åœ°å€åœ¨æ ˆã€å­˜å€¼åœ¨å †æ‰€ä»¥å…±äº«å†…å­˜ï¼›æµ…æ‹·è´åªå¤åˆ¶ç¬¬ä¸€å±‚åœ°å€ï¼Œæ·±æ‹·è´é€’å½’å¤åˆ¶æ‰€æœ‰å±‚ç›´åˆ°é‡åˆ°åŸºæœ¬ç±»å‹ä¸ºæ­¢ã€‚ç†è§£äº†å†…å­˜æ¨¡å‹ï¼Œå°±ç†è§£äº†ä¸ºä»€ä¹ˆéœ€è¦æ·±æ‹·è´ã€‚**

---

## ğŸ“š é€ŸæŸ¥å¡ç‰‡

```
æµ…æ‹·è´æ–¹æ³•ï¼š
â”œâ”€â”€ { ...obj }
â”œâ”€â”€ Object.assign({}, obj)
â”œâ”€â”€ Array.prototype.slice()
â””â”€â”€ Array.prototype.concat()

æ·±æ‹·è´æ–¹æ³•ï¼š
â”œâ”€â”€ JSON.parse(JSON.stringify(obj))  // æœ‰å‘ï¼Œæ…ç”¨
â”œâ”€â”€ æ‰‹å†™é€’å½’ + WeakMap               // é¢è¯•å¿…ä¼š
â”œâ”€â”€ lodash.cloneDeep()               // å·¥ä½œé¦–é€‰
â””â”€â”€ structuredClone()                // åŸç”ŸAPIï¼Œè¾ƒæ–°
```

---





---

## æ·±æµ…æ‹·è´çš„æœ¬è´¨ï¼šä¸€å¼ å›¾è¯´æ¸…æ¥š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         æ·±æµ…æ‹·è´çš„æœ¬è´¨                                       â”‚
â”‚                                                                             â”‚
â”‚   æ ¸å¿ƒé—®é¢˜ï¼šå¤åˆ¶çš„æ˜¯ã€å€¼ã€‘è¿˜æ˜¯ã€åœ°å€ã€‘ï¼Ÿ                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚                              å†…å­˜ç»“æ„                                        â”‚
â”‚                                                                             â”‚
â”‚        æ ˆå†…å­˜ (Stack)                      å †å†…å­˜ (Heap)                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚   â”‚  å˜é‡å  â”‚   å€¼      â”‚            â”‚                     â”‚               â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚   { name: 'Alice',  â”‚               â”‚
â”‚   â”‚   a     â”‚    1      â”‚ â† åŸºæœ¬ç±»å‹  â”‚     age: 25,        â”‚               â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚     address: {      â”‚               â”‚
â”‚   â”‚   b     â”‚  'hello'  â”‚ â† åŸºæœ¬ç±»å‹  â”‚       city: 'NYC'   â”‚               â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚     }               â”‚               â”‚
â”‚   â”‚  obj1   â”‚  0x001 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚   }                 â”‚               â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚                     â”‚               â”‚
â”‚   â”‚  obj2   â”‚    ?      â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                   â”‚
â”‚                                                                             â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                             â”‚
â”‚   obj2 = obj1 ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿæœ‰ä¸‰ç§æƒ…å†µï¼š                                       â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä¸‰ç§æ‹·è´æ–¹å¼çš„å†…å­˜å›¾è§£

### 1ï¸âƒ£ èµ‹å€¼ï¼šå¤åˆ¶åœ°å€ï¼ˆå®Œå…¨å…±äº«ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            èµ‹å€¼ï¼šobj2 = obj1                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚        æ ˆå†…å­˜                                 å †å†…å­˜                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚   â”‚  obj1  â”‚  0x001  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€>â”‚  {                  â”‚               â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚    â”‚    name: 'Alice',   â”‚               â”‚
â”‚   â”‚  obj2  â”‚  0x001  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    address: 0x002 â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚  }                  â”‚   â”‚           â”‚
â”‚                                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚           â”‚
â”‚                                                                â”‚           â”‚
â”‚                                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚           â”‚
â”‚                                      â”‚  { city: 'NYC' }    â”‚<â”€â”€â”˜           â”‚
â”‚                                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                                             â”‚
â”‚   ç»“æœï¼šobj1 å’Œ obj2 æŒ‡å‘ã€åŒä¸€ä¸ªå¯¹è±¡ã€‘                                      â”‚
â”‚         ä¿®æ”¹ obj2.name â†’ obj1.name ä¹Ÿå˜ âŒ                                  â”‚
â”‚         ä¿®æ”¹ obj2.address.city â†’ obj1.address.city ä¹Ÿå˜ âŒ                  â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2ï¸âƒ£ æµ…æ‹·è´ï¼šåªå¤åˆ¶ç¬¬ä¸€å±‚ï¼ˆåµŒå¥—ä»å…±äº«ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       æµ…æ‹·è´ï¼šobj2 = { ...obj1 }                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚        æ ˆå†…å­˜                                 å †å†…å­˜                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚   â”‚  obj1  â”‚  0x001  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚  {                  â”‚               â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚    name: 'Alice',   â”‚               â”‚
â”‚   â”‚  obj2  â”‚  0x003  â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚    address: 0x002 â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚       â”‚  }                  â”‚   â”‚           â”‚
â”‚                              â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚           â”‚
â”‚                              â”‚                                 â”‚           â”‚
â”‚                              â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚           â”‚
â”‚                              â”‚       â”‚  { city: 'NYC' }    â”‚<â”€â”€â”´â”€â”€â”€â”       â”‚
â”‚                              â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚       â”‚
â”‚                              â”‚                                     â”‚       â”‚
â”‚                              â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚       â”‚
â”‚                              â””â”€â”€â”€â”€â”€â”€>â”‚  {                  â”‚       â”‚       â”‚
â”‚                                      â”‚    name: 'Alice',   â”‚ æ–°çš„! â”‚       â”‚
â”‚                                      â”‚    address: 0x002 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                      â”‚  }                  â”‚  å…±äº«!        â”‚
â”‚                                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                                             â”‚
â”‚   ç»“æœï¼šç¬¬ä¸€å±‚ç‹¬ç«‹ï¼ŒåµŒå¥—å±‚å…±äº«                                               â”‚
â”‚         ä¿®æ”¹ obj2.name â†’ obj1.name ä¸å˜ âœ…                                  â”‚
â”‚         ä¿®æ”¹ obj2.address.city â†’ obj1.address.city ä¹Ÿå˜ âŒ                  â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3ï¸âƒ£ æ·±æ‹·è´ï¼šé€’å½’å¤åˆ¶æ‰€æœ‰å±‚ï¼ˆå®Œå…¨ç‹¬ç«‹ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      æ·±æ‹·è´ï¼šobj2 = deepClone(obj1)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚        æ ˆå†…å­˜                                 å †å†…å­˜                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚   â”‚  obj1  â”‚  0x001  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚  {                  â”‚               â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚    name: 'Alice',   â”‚               â”‚
â”‚   â”‚  obj2  â”‚  0x003  â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚    address: 0x002 â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚       â”‚  }                  â”‚     â”‚         â”‚
â”‚                              â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚         â”‚
â”‚                              â”‚                                   â–¼         â”‚
â”‚                              â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚                              â”‚       â”‚  { city: 'NYC' }    â”‚  obj1 çš„      â”‚
â”‚                              â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                              â”‚                                             â”‚
â”‚                              â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚                              â””â”€â”€â”€â”€â”€â”€>â”‚  {                  â”‚               â”‚
â”‚                                      â”‚    name: 'Alice',   â”‚  æ–°çš„!        â”‚
â”‚                                      â”‚    address: 0x004 â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚                                      â”‚  }                  â”‚     â”‚         â”‚
â”‚                                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚         â”‚
â”‚                                                                  â–¼         â”‚
â”‚                                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚                                      â”‚  { city: 'NYC' }    â”‚  ä¹Ÿæ˜¯æ–°çš„!    â”‚
â”‚                                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                                             â”‚
â”‚   ç»“æœï¼šæ‰€æœ‰å±‚éƒ½ç‹¬ç«‹                                                         â”‚
â”‚         ä¿®æ”¹ obj2.name â†’ obj1.name ä¸å˜ âœ…                                  â”‚
â”‚         ä¿®æ”¹ obj2.address.city â†’ obj1.address.city ä¸å˜ âœ…                  â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ·±æ‹·è´é€’å½’åŸç†å›¾è§£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         æ·±æ‹·è´çš„é€’å½’æœ¬è´¨                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   åŸå¯¹è±¡:                                                                   â”‚
â”‚   {                                                                         â”‚
â”‚     name: 'test',        â† åŸºæœ¬ç±»å‹                                         â”‚
â”‚     info: {              â† å¼•ç”¨ç±»å‹ï¼Œéœ€è¦é€’å½’                                â”‚
â”‚       age: 25,           â† åŸºæœ¬ç±»å‹                                         â”‚
â”‚       addr: {            â† å¼•ç”¨ç±»å‹ï¼Œéœ€è¦é€’å½’                                â”‚
â”‚         city: 'NYC'      â† åŸºæœ¬ç±»å‹                                         â”‚
â”‚       }                                                                     â”‚
â”‚     }                                                                       â”‚
â”‚   }                                                                         â”‚
â”‚                                                                             â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                             â”‚
â”‚   é€’å½’æ‹·è´è¿‡ç¨‹:                                                              â”‚
â”‚                                                                             â”‚
â”‚   deepClone(obj)                                                            â”‚
â”‚       â”‚                                                                     â”‚
â”‚       â”œâ”€â†’ name: 'test'                                                      â”‚
â”‚       â”‚      â”‚                                                              â”‚
â”‚       â”‚      â””â”€â†’ typeof === 'string' â†’ åŸºæœ¬ç±»å‹ â†’ ç›´æ¥è¿”å› 'test' âœ…        â”‚
â”‚       â”‚                                                                     â”‚
â”‚       â””â”€â†’ info: { age: 25, addr: {...} }                                   â”‚
â”‚              â”‚                                                              â”‚
â”‚              â””â”€â†’ typeof === 'object' â†’ å¼•ç”¨ç±»å‹ â†’ é€’å½’è°ƒç”¨ deepClone()      â”‚
â”‚                      â”‚                                                      â”‚
â”‚                      â”œâ”€â†’ age: 25                                           â”‚
â”‚                      â”‚      â”‚                                              â”‚
â”‚                      â”‚      â””â”€â†’ åŸºæœ¬ç±»å‹ â†’ ç›´æ¥è¿”å› 25 âœ…                   â”‚
â”‚                      â”‚                                                      â”‚
â”‚                      â””â”€â†’ addr: { city: 'NYC' }                             â”‚
â”‚                             â”‚                                              â”‚
â”‚                             â””â”€â†’ å¼•ç”¨ç±»å‹ â†’ å†æ¬¡é€’å½’ deepClone()             â”‚
â”‚                                    â”‚                                       â”‚
â”‚                                    â””â”€â†’ city: 'NYC'                         â”‚
â”‚                                           â”‚                                â”‚
â”‚                                           â””â”€â†’ åŸºæœ¬ç±»å‹ â†’ è¿”å› 'NYC' âœ…     â”‚
â”‚                                                                             â”‚
â”‚   ç»ˆæ­¢æ¡ä»¶: é‡åˆ°åŸºæœ¬ç±»å‹å°±åœæ­¢é€’å½’ï¼Œç›´æ¥è¿”å›å€¼                               â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å¾ªç¯å¼•ç”¨é—®é¢˜å›¾è§£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          å¾ªç¯å¼•ç”¨é—®é¢˜                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   const obj = { name: 'test' };                                            â”‚
â”‚   obj.self = obj;  // è‡ªå·±å¼•ç”¨è‡ªå·±                                          â”‚
â”‚                                                                             â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                      â”‚
â”‚                    â”‚  obj            â”‚                                      â”‚
â”‚                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                                      â”‚
â”‚                    â”‚  â”‚name:'test'â”‚  â”‚                                      â”‚
â”‚                    â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚                                      â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”‚ self: â”€â”€â”€â”€â”‚â”€â”€â”˜                                      â”‚
â”‚            â”‚       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         â”‚
â”‚            â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
â”‚            â”‚               â–²                                                â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  å¾ªç¯å¼•ç”¨!                                      â”‚
â”‚                                                                             â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                             â”‚
â”‚   ä¸å¤„ç†å¾ªç¯å¼•ç”¨ä¼šæ€æ ·ï¼Ÿ                                                     â”‚
â”‚                                                                             â”‚
â”‚   deepClone(obj)                                                            â”‚
â”‚       â””â”€â†’ deepClone(obj.self)      // self å°±æ˜¯ obj                        â”‚
â”‚               â””â”€â†’ deepClone(obj.self.self)   // è¿˜æ˜¯ obj                   â”‚
â”‚                       â””â”€â†’ deepClone(obj.self.self.self)  // æ— é™å¾ªç¯...    â”‚
â”‚                               â””â”€â†’ ...                                      â”‚
â”‚                                   â””â”€â†’ ğŸ’¥ æ ˆæº¢å‡º!                           â”‚
â”‚                                                                             â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                             â”‚
â”‚   è§£å†³æ–¹æ¡ˆ: ç”¨ WeakMap è®°å½•å·²æ‹·è´çš„å¯¹è±¡                                      â”‚
â”‚                                                                             â”‚
â”‚   WeakMap: { obj â†’ newObj }  // åŸå¯¹è±¡ â†’ æ–°å¯¹è±¡ çš„æ˜ å°„                      â”‚
â”‚                                                                             â”‚
â”‚   deepClone(obj, weakMap)                                                   â”‚
â”‚       â”‚                                                                     â”‚
â”‚       â”œâ”€â†’ weakMap.has(obj)? â†’ No                                           â”‚
â”‚       â”œâ”€â†’ åˆ›å»º newObj = {}                                                 â”‚
â”‚       â”œâ”€â†’ weakMap.set(obj, newObj)  // è®°ä½ï¼šobj å·²ç»åœ¨æ‹·è´äº†               â”‚
â”‚       â”‚                                                                     â”‚
â”‚       â””â”€â†’ æ‹·è´ self å±æ€§                                                   â”‚
â”‚               â”‚                                                            â”‚
â”‚               â””â”€â†’ deepClone(obj, weakMap)                                  â”‚
â”‚                       â”‚                                                    â”‚
â”‚                       â””â”€â†’ weakMap.has(obj)? â†’ Yes! âœ…                      â”‚
â”‚                           return weakMap.get(obj)  // ç›´æ¥è¿”å›ä¹‹å‰çš„ç»“æœ    â”‚
â”‚                           ä¸å†é€’å½’ï¼Œé¿å…æ­»å¾ªç¯!                             â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ æœ¬è´¨æ€»ç»“ï¼ˆå›¾è§£ç‰ˆï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚                        æ·±æµ…æ‹·è´æœ¬è´¨ = å¤åˆ¶ä»€ä¹ˆï¼Ÿ                             â”‚
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚   â”‚    èµ‹å€¼     â”‚      â”‚   æµ…æ‹·è´    â”‚      â”‚   æ·±æ‹·è´    â”‚                â”‚
â”‚   â”‚             â”‚      â”‚             â”‚      â”‚             â”‚                â”‚
â”‚   â”‚  å¤åˆ¶åœ°å€   â”‚      â”‚ å¤åˆ¶ç¬¬ä¸€å±‚  â”‚      â”‚ é€’å½’å¤åˆ¶    â”‚                â”‚
â”‚   â”‚  (å…±äº«)     â”‚      â”‚ (éƒ¨åˆ†ç‹¬ç«‹)  â”‚      â”‚ (å®Œå…¨ç‹¬ç«‹)  â”‚                â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚         â”‚                    â”‚                    â”‚                        â”‚
â”‚         â–¼                    â–¼                    â–¼                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚   â”‚ æ”¹ä¸€ä¸ª      â”‚      â”‚ æ”¹ç¬¬ä¸€å±‚    â”‚      â”‚ æ”¹ä»»ä½•å±‚    â”‚                â”‚
â”‚   â”‚ å…¨éƒ½å˜      â”‚      â”‚ ä¸å½±å“      â”‚      â”‚ éƒ½ä¸å½±å“    â”‚                â”‚
â”‚   â”‚             â”‚      â”‚ æ”¹åµŒå¥—å±‚    â”‚      â”‚             â”‚                â”‚
â”‚   â”‚             â”‚      â”‚ ä¼šå½±å“      â”‚      â”‚             â”‚                â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                                                             â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                             â”‚
â”‚   ä¸€å¥è¯: æµ…æ‹·è´åœåœ¨ç¬¬ä¸€å±‚ï¼Œæ·±æ‹·è´é€’å½’åˆ°åŸºæœ¬ç±»å‹ä¸ºæ­¢                         â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

è¿™äº›å›¾è§£è¡¥å……äº†ä¹‹å‰é—æ¼çš„**æœ¬è´¨æè¿°å¯è§†åŒ–**ï¼Œç°åœ¨æ ¸å¿ƒæ¦‚å¿µæ›´åŠ ç›´è§‚äº†ï¼

*æœ€åæ›´æ–°ï¼šåŸºäº ES6+ æ ‡å‡†æ•´ç†*


